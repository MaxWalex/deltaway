{"remainingRequest":"/home/vps/ppf/node_modules/babel-loader/lib/index.js??ref--13-2!/home/vps/ppf/src/apps/admin/ui/pages/DatabasePage/DatabasePage.jsx","dependencies":[{"path":"/home/vps/ppf/src/apps/admin/ui/pages/DatabasePage/DatabasePage.jsx","mtime":1671127635452},{"path":"/home/vps/ppf/.babelrc","mtime":1671127885972},{"path":"/home/vps/ppf/node_modules/cache-loader/dist/cjs.js","mtime":1671127657171},{"path":"/home/vps/ppf/node_modules/babel-loader/lib/index.js","mtime":1671127654997}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _React$createElement21, _React$createElement22;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _core = require('@material-ui/core');\n\nvar _Button = require('@material-ui/core/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _Typography = require('@material-ui/core/Typography');\n\nvar _Typography2 = _interopRequireDefault(_Typography);\n\nvar _SvgIcon = require('@material-ui/core/SvgIcon/SvgIcon');\n\nvar _SvgIcon2 = _interopRequireDefault(_SvgIcon);\n\nvar _compose = require('@tinkoff/utils/function/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _split = require('@tinkoff/utils/string/split');\n\nvar _split2 = _interopRequireDefault(_split);\n\nvar _last = require('@tinkoff/utils/array/last');\n\nvar _last2 = _interopRequireDefault(_last);\n\nvar _downloadDb2 = require('../../../services/downloadDb');\n\nvar _downloadDb3 = _interopRequireDefault(_downloadDb2);\n\nvar _downloadFiles2 = require('../../../services/downloadFiles');\n\nvar _downloadFiles3 = _interopRequireDefault(_downloadFiles2);\n\nvar _uploadDb2 = require('../../../services/uploadDb');\n\nvar _uploadDb3 = _interopRequireDefault(_uploadDb2);\n\nvar _uploadFiles2 = require('../../../services/uploadFiles');\n\nvar _uploadFiles3 = _interopRequireDefault(_uploadFiles2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n        downloadDb: function downloadDb(payload) {\n            return dispatch((0, _downloadDb3.default)(payload));\n        },\n        downloadFiles: function downloadFiles(payload) {\n            return dispatch((0, _downloadFiles3.default)(payload));\n        },\n        uploadDb: function uploadDb(payload) {\n            return dispatch((0, _uploadDb3.default)(payload));\n        },\n        uploadFiles: function uploadFiles(payload) {\n            return dispatch((0, _uploadFiles3.default)(payload));\n        }\n    };\n};\n\nvar materialStyles = function materialStyles(theme) {\n    return {\n        root: {\n            padding: '20px'\n        },\n        button: {\n            marginRight: '10px'\n        },\n        uploadInput: {\n            display: 'none'\n        },\n        uploadIcon: {\n            marginLeft: theme.spacing(1),\n            width: '30px',\n            height: '19px',\n            color: 'black'\n        },\n        buttonBlocks: {\n            display: 'flex'\n        },\n        uploadButton: {\n            marginTop: '10px'\n        },\n        buttonBlock: {\n            marginRight: '20px',\n            display: 'flex',\n            flexDirection: 'column'\n        },\n        uploadSection: {\n            marginTop: '20px'\n        },\n        fileName: {\n            marginTop: '10px'\n        }\n    };\n};\n\nvar _ref2 = _react2.default.createElement(\n    _Typography2.default,\n    (_React$createElement21 = { variant: 'h6', 'data-qa-file': 'DatabasePage'\n    }, (0, _defineProperty3.default)(_React$createElement21, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement21, 'data-qa-file', 'DatabasePage'), _React$createElement21),\n    '\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C'\n);\n\nvar _ref3 = _react2.default.createElement(\n    _Typography2.default,\n    (_React$createElement22 = { variant: 'h6', 'data-qa-file': 'DatabasePage'\n    }, (0, _defineProperty3.default)(_React$createElement22, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement22, 'data-qa-file', 'DatabasePage'), _React$createElement22),\n    '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C'\n);\n\nvar DatabasePage = function (_Component) {\n    (0, _inherits3.default)(DatabasePage, _Component);\n\n    function DatabasePage() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        (0, _classCallCheck3.default)(this, DatabasePage);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = DatabasePage.__proto__ || Object.getPrototypeOf(DatabasePage)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.handleDownloadDb = function () {\n            _this.props.downloadDb().then(function (url) {\n                var link = document.createElement('a');\n                var fileName = (0, _compose2.default)(_last2.default, (0, _split2.default)('/'))(url);\n\n                link.style = 'display: none';\n                link.href = url;\n                link.download = fileName;\n                document.body.appendChild(link);\n                link.click();\n                setTimeout(function () {\n                    // For Firefox it is necessary to delay revoking the ObjectURL\n                    document.body.removeChild(link);\n                    window.URL.revokeObjectURL(url);\n                }, 100);\n            });\n        }, _this.handleDownloadFiles = function () {\n            _this.props.downloadFiles().then(function (url) {\n                var link = document.createElement('a');\n                var fileName = (0, _compose2.default)(_last2.default, (0, _split2.default)('/'))(url);\n\n                link.style = 'display: none';\n                link.href = url;\n                link.download = fileName;\n                document.body.appendChild(link);\n                link.click();\n                setTimeout(function () {\n                    // For Firefox it is necessary to delay revoking the ObjectURL\n                    document.body.removeChild(link);\n                    window.URL.revokeObjectURL(url);\n                }, 100);\n            });\n        }, _this.handleUploadDb = function () {\n            var db = _this.state.db;\n\n            var formData = new FormData();\n\n            formData.append('db', db);\n\n            return _this.props.uploadDb(formData).then(function () {\n                _this.setState({ db: null });\n            });\n        }, _this.handleUploadFiles = function () {\n            var files = _this.state.files;\n\n            var formData = new FormData();\n\n            formData.append('files', files);\n\n            return _this.props.uploadFiles(formData).then(function () {\n                _this.setState({ files: null });\n            });\n        }, _this.handleFilesUpload = function (name) {\n            return function (event) {\n                var file = event.target.files[0];\n\n                event.target.value = '';\n\n                _this.setState((0, _defineProperty3.default)({}, name, file));\n            };\n        }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(DatabasePage, [{\n        key: 'render',\n        value: function render() {\n            var _React$createElement, _React$createElement2, _React$createElement3, _React$createElement4, _React$createElement5, _React$createElement6, _React$createElement7, _React$createElement8, _React$createElement9, _React$createElement10, _React$createElement11, _React$createElement12, _React$createElement13, _React$createElement14, _React$createElement15, _React$createElement16, _React$createElement17, _React$createElement18, _React$createElement19, _React$createElement20;\n\n            var classes = this.props.classes;\n            var _state = this.state,\n                db = _state.db,\n                files = _state.files;\n\n\n            return _react2.default.createElement(\n                'section',\n                (_React$createElement20 = { className: classes.root, 'data-qa-file': 'DatabasePage'\n                }, (0, _defineProperty3.default)(_React$createElement20, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement20, 'data-qa-file', 'DatabasePage'), _React$createElement20),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement3 = {\n                        'data-qa-file': 'DatabasePage'\n                    }, (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'DatabasePage'), _React$createElement3),\n                    _ref2,\n                    _react2.default.createElement(\n                        _Button2.default,\n                        (_React$createElement = {\n                            onClick: this.handleDownloadDb,\n                            className: classes.button,\n                            variant: 'contained',\n                            color: 'primary',\n                            'data-qa-file': 'DatabasePage'\n                        }, (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'DatabasePage'), _React$createElement),\n                        '\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C DB'\n                    ),\n                    _react2.default.createElement(\n                        _Button2.default,\n                        (_React$createElement2 = {\n                            onClick: this.handleDownloadFiles,\n                            className: classes.button,\n                            variant: 'contained',\n                            color: 'primary',\n                            'data-qa-file': 'DatabasePage'\n                        }, (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'DatabasePage'), _React$createElement2),\n                        '\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\\u044B'\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement19 = { className: classes.uploadSection, 'data-qa-file': 'DatabasePage'\n                    }, (0, _defineProperty3.default)(_React$createElement19, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement19, 'data-qa-file', 'DatabasePage'), _React$createElement19),\n                    _ref3,\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement18 = { className: classes.buttonBlocks, 'data-qa-file': 'DatabasePage'\n                        }, (0, _defineProperty3.default)(_React$createElement18, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement18, 'data-qa-file', 'DatabasePage'), _React$createElement18),\n                        _react2.default.createElement(\n                            'div',\n                            (_React$createElement10 = { className: classes.buttonBlock, 'data-qa-file': 'DatabasePage'\n                            }, (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'DatabasePage'), _React$createElement10),\n                            _react2.default.createElement(\n                                'label',\n                                (_React$createElement7 = {\n                                    'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'DatabasePage'), _React$createElement7),\n                                _react2.default.createElement('input', (_React$createElement4 = {\n                                    className: classes.uploadInput,\n                                    type: 'file',\n                                    accept: '.tar',\n                                    onChange: this.handleFilesUpload('db'),\n                                    'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'DatabasePage'), _React$createElement4)),\n                                _react2.default.createElement(\n                                    _Button2.default,\n                                    (_React$createElement6 = { variant: 'contained', component: 'span', color: 'default', 'data-qa-file': 'DatabasePage'\n                                    }, (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'DatabasePage'), _React$createElement6),\n                                    '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C',\n                                    _react2.default.createElement(_SvgIcon2.default, (_React$createElement5 = { className: classes.uploadIcon, 'data-qa-file': 'DatabasePage'\n                                    }, (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'DatabasePage'), _React$createElement5))\n                                )\n                            ),\n                            db && _react2.default.createElement(\n                                _Typography2.default,\n                                (_React$createElement8 = { className: classes.fileName, 'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'DatabasePage'), _React$createElement8),\n                                db.name\n                            ),\n                            _react2.default.createElement(\n                                _Button2.default,\n                                (_React$createElement9 = {\n                                    onClick: this.handleUploadDb,\n                                    className: classes.uploadButton,\n                                    variant: 'contained',\n                                    color: 'primary',\n                                    disabled: !db,\n                                    'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'DatabasePage'), _React$createElement9),\n                                '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C DB'\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            (_React$createElement17 = { className: classes.buttonBlock, 'data-qa-file': 'DatabasePage'\n                            }, (0, _defineProperty3.default)(_React$createElement17, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement17, 'data-qa-file', 'DatabasePage'), _React$createElement17),\n                            _react2.default.createElement(\n                                'label',\n                                (_React$createElement14 = {\n                                    'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'DatabasePage'), _React$createElement14),\n                                _react2.default.createElement('input', (_React$createElement11 = {\n                                    className: classes.uploadInput,\n                                    type: 'file',\n                                    accept: '.tar',\n                                    onChange: this.handleFilesUpload('files'),\n                                    'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'DatabasePage'), _React$createElement11)),\n                                _react2.default.createElement(\n                                    _Button2.default,\n                                    (_React$createElement13 = { variant: 'contained', component: 'span', color: 'default', 'data-qa-file': 'DatabasePage'\n                                    }, (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'DatabasePage'), _React$createElement13),\n                                    '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C',\n                                    _react2.default.createElement(_SvgIcon2.default, (_React$createElement12 = { className: classes.uploadIcon, 'data-qa-file': 'DatabasePage'\n                                    }, (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'DatabasePage'), _React$createElement12))\n                                )\n                            ),\n                            files && _react2.default.createElement(\n                                _Typography2.default,\n                                (_React$createElement15 = { className: classes.fileName, 'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'DatabasePage'), _React$createElement15),\n                                files.name\n                            ),\n                            _react2.default.createElement(\n                                _Button2.default,\n                                (_React$createElement16 = {\n                                    onClick: this.handleUploadFiles,\n                                    className: classes.uploadButton,\n                                    variant: 'contained',\n                                    color: 'primary',\n                                    disabled: !files,\n                                    'data-qa-file': 'DatabasePage'\n                                }, (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'DatabasePage'), _React$createElement16),\n                                '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\\u044B'\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return DatabasePage;\n}(_react.Component);\n\nexports.default = (0, _reactRedux.connect)(undefined, mapDispatchToProps)((0, _core.withStyles)(materialStyles)(DatabasePage));",null]}