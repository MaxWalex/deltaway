{"remainingRequest":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js??ref--13-2!C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\admin\\ui\\pages\\DatabasePage\\DatabasePage.jsx","dependencies":[{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\admin\\ui\\pages\\DatabasePage\\DatabasePage.jsx","mtime":1671546446000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\.babelrc","mtime":1671546158000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1671546958000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js","mtime":1671546956000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class,\n    _temp2,\n    _jsxFileName = 'C:\\\\Users\\\\cherv\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\deltaway.20\\\\src\\\\apps\\\\admin\\\\ui\\\\pages\\\\DatabasePage\\\\DatabasePage.jsx';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _core = require('@material-ui/core');\n\nvar _Button = require('@material-ui/core/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _Typography = require('@material-ui/core/Typography');\n\nvar _Typography2 = _interopRequireDefault(_Typography);\n\nvar _SvgIcon = require('@material-ui/core/SvgIcon/SvgIcon');\n\nvar _SvgIcon2 = _interopRequireDefault(_SvgIcon);\n\nvar _compose = require('@tinkoff/utils/function/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _split = require('@tinkoff/utils/string/split');\n\nvar _split2 = _interopRequireDefault(_split);\n\nvar _last = require('@tinkoff/utils/array/last');\n\nvar _last2 = _interopRequireDefault(_last);\n\nvar _downloadDb2 = require('../../../services/downloadDb');\n\nvar _downloadDb3 = _interopRequireDefault(_downloadDb2);\n\nvar _downloadFiles2 = require('../../../services/downloadFiles');\n\nvar _downloadFiles3 = _interopRequireDefault(_downloadFiles2);\n\nvar _uploadDb2 = require('../../../services/uploadDb');\n\nvar _uploadDb3 = _interopRequireDefault(_uploadDb2);\n\nvar _uploadFiles2 = require('../../../services/uploadFiles');\n\nvar _uploadFiles3 = _interopRequireDefault(_uploadFiles2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n        downloadDb: function downloadDb(payload) {\n            return dispatch((0, _downloadDb3.default)(payload));\n        },\n        downloadFiles: function downloadFiles(payload) {\n            return dispatch((0, _downloadFiles3.default)(payload));\n        },\n        uploadDb: function uploadDb(payload) {\n            return dispatch((0, _uploadDb3.default)(payload));\n        },\n        uploadFiles: function uploadFiles(payload) {\n            return dispatch((0, _uploadFiles3.default)(payload));\n        }\n    };\n};\n\nvar materialStyles = function materialStyles(theme) {\n    return {\n        root: {\n            padding: '20px'\n        },\n        button: {\n            marginRight: '10px'\n        },\n        uploadInput: {\n            display: 'none'\n        },\n        uploadIcon: {\n            marginLeft: theme.spacing(1),\n            width: '30px',\n            height: '19px',\n            color: 'black'\n        },\n        buttonBlocks: {\n            display: 'flex'\n        },\n        uploadButton: {\n            marginTop: '10px'\n        },\n        buttonBlock: {\n            marginRight: '20px',\n            display: 'flex',\n            flexDirection: 'column'\n        },\n        uploadSection: {\n            marginTop: '20px'\n        },\n        fileName: {\n            marginTop: '10px'\n        }\n    };\n};\n\nvar DatabasePage = (_temp2 = _class = function (_Component) {\n    (0, _inherits3.default)(DatabasePage, _Component);\n\n    function DatabasePage() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        (0, _classCallCheck3.default)(this, DatabasePage);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = DatabasePage.__proto__ || Object.getPrototypeOf(DatabasePage)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.handleDownloadDb = function () {\n            _this.props.downloadDb().then(function (url) {\n                var link = document.createElement('a');\n                var fileName = (0, _compose2.default)(_last2.default, (0, _split2.default)('/'))(url);\n\n                link.style = 'display: none';\n                link.href = url;\n                link.download = fileName;\n                document.body.appendChild(link);\n                link.click();\n                setTimeout(function () {\n                    // For Firefox it is necessary to delay revoking the ObjectURL\n                    document.body.removeChild(link);\n                    window.URL.revokeObjectURL(url);\n                }, 100);\n            });\n        }, _this.handleDownloadFiles = function () {\n            _this.props.downloadFiles().then(function (url) {\n                var link = document.createElement('a');\n                var fileName = (0, _compose2.default)(_last2.default, (0, _split2.default)('/'))(url);\n\n                link.style = 'display: none';\n                link.href = url;\n                link.download = fileName;\n                document.body.appendChild(link);\n                link.click();\n                setTimeout(function () {\n                    // For Firefox it is necessary to delay revoking the ObjectURL\n                    document.body.removeChild(link);\n                    window.URL.revokeObjectURL(url);\n                }, 100);\n            });\n        }, _this.handleUploadDb = function () {\n            var db = _this.state.db;\n\n            var formData = new FormData();\n\n            formData.append('db', db);\n\n            return _this.props.uploadDb(formData).then(function () {\n                _this.setState({ db: null });\n            });\n        }, _this.handleUploadFiles = function () {\n            var files = _this.state.files;\n\n            var formData = new FormData();\n\n            formData.append('files', files);\n\n            return _this.props.uploadFiles(formData).then(function () {\n                _this.setState({ files: null });\n            });\n        }, _this.handleFilesUpload = function (name) {\n            return function (event) {\n                var file = event.target.files[0];\n\n                event.target.value = '';\n\n                _this.setState((0, _defineProperty3.default)({}, name, file));\n            };\n        }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(DatabasePage, [{\n        key: 'render',\n        value: function render() {\n            var _React$createElement, _React$createElement2, _React$createElement3, _React$createElement4, _React$createElement5, _React$createElement6, _React$createElement7, _React$createElement8, _React$createElement9, _React$createElement10, _React$createElement11, _React$createElement12, _React$createElement13, _React$createElement14, _React$createElement15, _React$createElement16, _React$createElement17, _React$createElement18, _React$createElement19, _React$createElement20, _React$createElement21, _React$createElement22;\n\n            var classes = this.props.classes;\n            var _state = this.state,\n                db = _state.db,\n                files = _state.files;\n\n\n            return _react2.default.createElement(\n                'section',\n                (_React$createElement22 = { className: classes.root, 'data-qa-file': 'DatabasePage',\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 154\n                    },\n                    __self: this\n                }, (0, _defineProperty3.default)(_React$createElement22, '__self', this), (0, _defineProperty3.default)(_React$createElement22, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement22, 'data-qa-file', 'DatabasePage'), _React$createElement22),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement4 = {\n                        'data-qa-file': 'DatabasePage',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 155\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement4, '__self', this), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'DatabasePage'), _React$createElement4),\n                    _react2.default.createElement(\n                        _Typography2.default,\n                        (_React$createElement = { variant: 'h6', 'data-qa-file': 'DatabasePage',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 156\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement, '__self', this), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'DatabasePage'), _React$createElement),\n                        '\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C'\n                    ),\n                    _react2.default.createElement(\n                        _Button2.default,\n                        (_React$createElement2 = {\n                            onClick: this.handleDownloadDb,\n                            className: classes.button,\n                            variant: 'contained',\n                            color: 'primary',\n                            'data-qa-file': 'DatabasePage',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 157\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement2, '__self', this), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'DatabasePage'), _React$createElement2),\n                        '\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C DB'\n                    ),\n                    _react2.default.createElement(\n                        _Button2.default,\n                        (_React$createElement3 = {\n                            onClick: this.handleDownloadFiles,\n                            className: classes.button,\n                            variant: 'contained',\n                            color: 'primary',\n                            'data-qa-file': 'DatabasePage',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 165\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement3, '__self', this), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'DatabasePage'), _React$createElement3),\n                        '\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\\u044B'\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement21 = { className: classes.uploadSection, 'data-qa-file': 'DatabasePage',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 174\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement21, '__self', this), (0, _defineProperty3.default)(_React$createElement21, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement21, 'data-qa-file', 'DatabasePage'), _React$createElement21),\n                    _react2.default.createElement(\n                        _Typography2.default,\n                        (_React$createElement5 = { variant: 'h6', 'data-qa-file': 'DatabasePage',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 175\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement5, '__self', this), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'DatabasePage'), _React$createElement5),\n                        '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C'\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement20 = { className: classes.buttonBlocks, 'data-qa-file': 'DatabasePage',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 176\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement20, '__self', this), (0, _defineProperty3.default)(_React$createElement20, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement20, 'data-qa-file', 'DatabasePage'), _React$createElement20),\n                        _react2.default.createElement(\n                            'div',\n                            (_React$createElement12 = { className: classes.buttonBlock, 'data-qa-file': 'DatabasePage',\n                                __source: {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 177\n                                },\n                                __self: this\n                            }, (0, _defineProperty3.default)(_React$createElement12, '__self', this), (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'DatabasePage'), _React$createElement12),\n                            _react2.default.createElement(\n                                'label',\n                                (_React$createElement9 = {\n                                    'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 178\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement9, '__self', this), (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'DatabasePage'), _React$createElement9),\n                                _react2.default.createElement('input', (_React$createElement6 = {\n                                    className: classes.uploadInput,\n                                    type: 'file',\n                                    accept: '.tar',\n                                    onChange: this.handleFilesUpload('db'),\n                                    'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 179\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement6, '__self', this), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'DatabasePage'), _React$createElement6)),\n                                _react2.default.createElement(\n                                    _Button2.default,\n                                    (_React$createElement8 = { variant: 'contained', component: 'span', color: 'default', 'data-qa-file': 'DatabasePage',\n                                        __source: {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 185\n                                        },\n                                        __self: this\n                                    }, (0, _defineProperty3.default)(_React$createElement8, '__self', this), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'DatabasePage'), _React$createElement8),\n                                    '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C',\n                                    _react2.default.createElement(_SvgIcon2.default, (_React$createElement7 = { className: classes.uploadIcon, 'data-qa-file': 'DatabasePage',\n                                        __source: {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 187\n                                        },\n                                        __self: this\n                                    }, (0, _defineProperty3.default)(_React$createElement7, '__self', this), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'DatabasePage'), _React$createElement7))\n                                )\n                            ),\n                            db && _react2.default.createElement(\n                                _Typography2.default,\n                                (_React$createElement10 = { className: classes.fileName, 'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 190\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement10, '__self', this), (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'DatabasePage'), _React$createElement10),\n                                db.name\n                            ),\n                            _react2.default.createElement(\n                                _Button2.default,\n                                (_React$createElement11 = {\n                                    onClick: this.handleUploadDb,\n                                    className: classes.uploadButton,\n                                    variant: 'contained',\n                                    color: 'primary',\n                                    disabled: !db,\n                                    'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 191\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement11, '__self', this), (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'DatabasePage'), _React$createElement11),\n                                '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C DB'\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            (_React$createElement19 = { className: classes.buttonBlock, 'data-qa-file': 'DatabasePage',\n                                __source: {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 201\n                                },\n                                __self: this\n                            }, (0, _defineProperty3.default)(_React$createElement19, '__self', this), (0, _defineProperty3.default)(_React$createElement19, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement19, 'data-qa-file', 'DatabasePage'), _React$createElement19),\n                            _react2.default.createElement(\n                                'label',\n                                (_React$createElement16 = {\n                                    'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 202\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement16, '__self', this), (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'DatabasePage'), _React$createElement16),\n                                _react2.default.createElement('input', (_React$createElement13 = {\n                                    className: classes.uploadInput,\n                                    type: 'file',\n                                    accept: '.tar',\n                                    onChange: this.handleFilesUpload('files'),\n                                    'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 203\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement13, '__self', this), (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'DatabasePage'), _React$createElement13)),\n                                _react2.default.createElement(\n                                    _Button2.default,\n                                    (_React$createElement15 = { variant: 'contained', component: 'span', color: 'default', 'data-qa-file': 'DatabasePage',\n                                        __source: {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 209\n                                        },\n                                        __self: this\n                                    }, (0, _defineProperty3.default)(_React$createElement15, '__self', this), (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'DatabasePage'), _React$createElement15),\n                                    '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C',\n                                    _react2.default.createElement(_SvgIcon2.default, (_React$createElement14 = { className: classes.uploadIcon, 'data-qa-file': 'DatabasePage',\n                                        __source: {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 211\n                                        },\n                                        __self: this\n                                    }, (0, _defineProperty3.default)(_React$createElement14, '__self', this), (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'DatabasePage'), _React$createElement14))\n                                )\n                            ),\n                            files && _react2.default.createElement(\n                                _Typography2.default,\n                                (_React$createElement17 = { className: classes.fileName, 'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 214\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement17, '__self', this), (0, _defineProperty3.default)(_React$createElement17, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement17, 'data-qa-file', 'DatabasePage'), _React$createElement17),\n                                files.name\n                            ),\n                            _react2.default.createElement(\n                                _Button2.default,\n                                (_React$createElement18 = {\n                                    onClick: this.handleUploadFiles,\n                                    className: classes.uploadButton,\n                                    variant: 'contained',\n                                    color: 'primary',\n                                    disabled: !files,\n                                    'data-qa-file': 'DatabasePage',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 215\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement18, '__self', this), (0, _defineProperty3.default)(_React$createElement18, 'data-qa-file', 'DatabasePage'), (0, _defineProperty3.default)(_React$createElement18, 'data-qa-file', 'DatabasePage'), _React$createElement18),\n                                '\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\\u044B'\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return DatabasePage;\n}(_react.Component), _class.propTypes = {\n    downloadDb: _propTypes2.default.func.isRequired,\n    downloadFiles: _propTypes2.default.func.isRequired,\n    uploadDb: _propTypes2.default.func.isRequired,\n    uploadFiles: _propTypes2.default.func.isRequired,\n    classes: _propTypes2.default.object.isRequired\n}, _temp2);\nexports.default = (0, _reactRedux.connect)(undefined, mapDispatchToProps)((0, _core.withStyles)(materialStyles)(DatabasePage));",{"version":3,"sources":["src\\apps\\admin\\ui\\pages\\DatabasePage\\DatabasePage.jsx"],"names":["mapDispatchToProps","dispatch","downloadDb","payload","downloadFiles","uploadDb","uploadFiles","materialStyles","root","padding","button","marginRight","uploadInput","display","uploadIcon","marginLeft","theme","spacing","width","height","color","buttonBlocks","uploadButton","marginTop","buttonBlock","flexDirection","uploadSection","fileName","DatabasePage","state","handleDownloadDb","props","then","link","document","createElement","last","url","style","href","download","body","appendChild","click","setTimeout","removeChild","window","URL","revokeObjectURL","handleDownloadFiles","handleUploadDb","db","formData","FormData","append","setState","handleUploadFiles","files","handleFilesUpload","file","event","target","value","name","classes","Component","propTypes","PropTypes","func","isRequired","object","undefined"],"mappings":"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","file":"DatabasePage.jsx","sourceRoot":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport CloudUploadIcon from '@material-ui/core/SvgIcon/SvgIcon';\n\nimport compose from '@tinkoff/utils/function/compose';\nimport split from '@tinkoff/utils/string/split';\nimport last from '@tinkoff/utils/array/last';\n\nimport downloadDb from '../../../services/downloadDb';\nimport downloadFiles from '../../../services/downloadFiles';\nimport uploadDb from '../../../services/uploadDb';\nimport uploadFiles from '../../../services/uploadFiles';\n\nconst mapDispatchToProps = (dispatch) => ({\n    downloadDb: payload => dispatch(downloadDb(payload)),\n    downloadFiles: payload => dispatch(downloadFiles(payload)),\n    uploadDb: payload => dispatch(uploadDb(payload)),\n    uploadFiles: payload => dispatch(uploadFiles(payload))\n});\n\nconst materialStyles = theme => ({\n    root: {\n        padding: '20px'\n    },\n    button: {\n        marginRight: '10px'\n    },\n    uploadInput: {\n        display: 'none'\n    },\n    uploadIcon: {\n        marginLeft: theme.spacing(1),\n        width: '30px',\n        height: '19px',\n        color: 'black'\n    },\n    buttonBlocks: {\n        display: 'flex'\n    },\n    uploadButton: {\n        marginTop: '10px'\n    },\n    buttonBlock: {\n        marginRight: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    uploadSection: {\n        marginTop: '20px'\n    },\n    fileName: {\n        marginTop: '10px'\n    }\n});\n\nclass DatabasePage extends Component {\n    static propTypes = {\n        downloadDb: PropTypes.func.isRequired,\n        downloadFiles: PropTypes.func.isRequired,\n        uploadDb: PropTypes.func.isRequired,\n        uploadFiles: PropTypes.func.isRequired,\n        classes: PropTypes.object.isRequired\n    };\n\n    state = {};\n\n    handleDownloadDb = () => {\n        this.props.downloadDb()\n            .then(url => {\n                const link = document.createElement('a');\n                const fileName = compose(\n                    last,\n                    split('/')\n                )(url);\n\n                link.style = 'display: none';\n                link.href = url;\n                link.download = fileName;\n                document.body.appendChild(link);\n                link.click();\n                setTimeout(() => {\n                    // For Firefox it is necessary to delay revoking the ObjectURL\n                    document.body.removeChild(link);\n                    window.URL.revokeObjectURL(url);\n                }, 100);\n            });\n    };\n\n    handleDownloadFiles = () => {\n        this.props.downloadFiles()\n            .then(url => {\n                const link = document.createElement('a');\n                const fileName = compose(\n                    last,\n                    split('/')\n                )(url);\n\n                link.style = 'display: none';\n                link.href = url;\n                link.download = fileName;\n                document.body.appendChild(link);\n                link.click();\n                setTimeout(() => {\n                    // For Firefox it is necessary to delay revoking the ObjectURL\n                    document.body.removeChild(link);\n                    window.URL.revokeObjectURL(url);\n                }, 100);\n            });\n    };\n\n    handleUploadDb = () => {\n        const { db } = this.state;\n        const formData = new FormData();\n\n        formData.append('db', db);\n\n        return this.props.uploadDb(formData)\n            .then(() => {\n                this.setState({ db: null });\n            });\n    };\n\n    handleUploadFiles = () => {\n        const { files } = this.state;\n        const formData = new FormData();\n\n        formData.append('files', files);\n\n        return this.props.uploadFiles(formData)\n            .then(() => {\n                this.setState({ files: null });\n            });\n    };\n\n    handleFilesUpload = name => event => {\n        const file = event.target.files[0];\n\n        event.target.value = '';\n\n        this.setState({\n            [name]: file\n        });\n    };\n\n    render () {\n        const { classes } = this.props;\n        const { db, files } = this.state;\n\n        return <section className={classes.root}>\n            <div>\n                <Typography variant='h6'>Скачать</Typography>\n                <Button\n                    onClick={this.handleDownloadDb}\n                    className={classes.button}\n                    variant='contained'\n                    color='primary'\n                >\n                    Скачать DB\n                </Button>\n                <Button\n                    onClick={this.handleDownloadFiles}\n                    className={classes.button}\n                    variant='contained'\n                    color='primary'\n                >\n                    Скачать файлы\n                </Button>\n            </div>\n            <div className={classes.uploadSection}>\n                <Typography variant='h6'>Загрузить</Typography>\n                <div className={classes.buttonBlocks}>\n                    <div className={classes.buttonBlock}>\n                        <label>\n                            <input\n                                className={classes.uploadInput}\n                                type='file'\n                                accept=\".tar\"\n                                onChange={this.handleFilesUpload('db')}\n                            />\n                            <Button variant='contained' component='span' color='default'>\n                                Загрузить\n                                <CloudUploadIcon className={classes.uploadIcon} />\n                            </Button>\n                        </label>\n                        {db && <Typography className={classes.fileName}>{db.name}</Typography>}\n                        <Button\n                            onClick={this.handleUploadDb}\n                            className={classes.uploadButton}\n                            variant='contained'\n                            color='primary'\n                            disabled={!db}\n                        >\n                            Загрузить DB\n                        </Button>\n                    </div>\n                    <div className={classes.buttonBlock}>\n                        <label>\n                            <input\n                                className={classes.uploadInput}\n                                type='file'\n                                accept=\".tar\"\n                                onChange={this.handleFilesUpload('files')}\n                            />\n                            <Button variant='contained' component='span' color='default'>\n                                Загрузить\n                                <CloudUploadIcon className={classes.uploadIcon} />\n                            </Button>\n                        </label>\n                        {files && <Typography className={classes.fileName}>{files.name}</Typography>}\n                        <Button\n                            onClick={this.handleUploadFiles}\n                            className={classes.uploadButton}\n                            variant='contained'\n                            color='primary'\n                            disabled={!files}\n                        >\n                            Загрузить файлы\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </section>;\n    }\n}\n\nexport default connect(undefined, mapDispatchToProps)(withStyles(materialStyles)(DatabasePage));\n"]}]}