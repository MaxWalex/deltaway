{"remainingRequest":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js??ref--13-2!C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\client\\ui\\components\\ResetPasswordFormPopup\\ResetPasswordFormPopup.jsx","dependencies":[{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\client\\ui\\components\\ResetPasswordFormPopup\\ResetPasswordFormPopup.jsx","mtime":1671546486000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\.babelrc","mtime":1671546158000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1671546958000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js","mtime":1671546956000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class,\n    _temp,\n    _jsxFileName = 'C:\\\\Users\\\\cherv\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\deltaway.20\\\\src\\\\apps\\\\client\\\\ui\\\\components\\\\ResetPasswordFormPopup\\\\ResetPasswordFormPopup.jsx';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _propOr = require('@tinkoff/utils/object/propOr');\n\nvar _propOr2 = _interopRequireDefault(_propOr);\n\nvar _noop = require('@tinkoff/utils/function/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _pathOr = require('@tinkoff/utils/object/pathOr');\n\nvar _pathOr2 = _interopRequireDefault(_pathOr);\n\nvar _undefined = require('@tinkoff/utils/is/undefined');\n\nvar _undefined2 = _interopRequireDefault(_undefined);\n\nvar _object = require('@tinkoff/utils/is/object');\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _array = require('@tinkoff/utils/is/array');\n\nvar _array2 = _interopRequireDefault(_array);\n\nvar _required = require('../Form/validators/required');\n\nvar _required2 = _interopRequireDefault(_required);\n\nvar _email = require('../Form/validators/email');\n\nvar _email2 = _interopRequireDefault(_email);\n\nvar _FormInput = require('../FormInput/FormInput');\n\nvar _FormInput2 = _interopRequireDefault(_FormInput);\n\nvar _ResetPasswordFormPopup = require('./ResetPasswordFormPopup.css');\n\nvar _ResetPasswordFormPopup2 = _interopRequireDefault(_ResetPasswordFormPopup);\n\nvar _sendForm2 = require('../../../services/client/sendForm');\n\nvar _sendForm3 = _interopRequireDefault(_sendForm2);\n\nvar _resetPassword2 = require('../../../services/client/resetPassword');\n\nvar _resetPassword3 = _interopRequireDefault(_resetPassword2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mapStateToProps = function mapStateToProps(_ref) {\n    var application = _ref.application;\n\n    return {\n        langMap: application.langMap\n    };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n        sendForm: function sendForm(payload) {\n            return dispatch((0, _sendForm3.default)(payload));\n        },\n        resetPassword: function resetPassword(payload) {\n            return dispatch((0, _resetPassword3.default)(payload));\n        }\n    };\n};\n\nvar ResetPasswordFormPopup = (_temp = _class = function (_Component) {\n    (0, _inherits3.default)(ResetPasswordFormPopup, _Component);\n\n    function ResetPasswordFormPopup(props) {\n        (0, _classCallCheck3.default)(this, ResetPasswordFormPopup);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ResetPasswordFormPopup.__proto__ || Object.getPrototypeOf(ResetPasswordFormPopup)).call(this, props));\n\n        _this.handleChange = function (name, value) {\n            return function (e) {\n                e.stopPropagation();\n                var actualValue = (0, _undefined2.default)(value) ? e.target.value : value;\n\n                if (actualValue.length > _this.state.maxLength) return;\n\n                _this.setState((0, _defineProperty3.default)({}, name, (0, _extends3.default)({}, _this.state[name], { value: actualValue, focus: (0, _undefined2.default)(value), isValid: true })));\n            };\n        };\n\n        _this.onFocus = function (name) {\n            return function (e) {\n                e.stopPropagation();\n                _this.setState((0, _defineProperty3.default)({}, name, (0, _extends3.default)({}, _this.state[name], { focus: !_this.state[name].focus })));\n            };\n        };\n\n        _this.onBlur = function (name) {\n            var currentState = _this.handleCheckErrors([name]);\n\n            _this.setState((0, _defineProperty3.default)({}, name, (0, _extends3.default)({}, _this.state[name], { focus: false, isValid: currentState[name].isValid })));\n        };\n\n        _this.handleCheckErrors = function () {\n            var names = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n            var thisState = {};\n\n            names.forEach(function (name) {\n                var property = _this.state[name];\n\n                if ((0, _object2.default)(property) && !(0, _array2.default)(property)) {\n                    var value = _this.state[name].value;\n                    var isValid = (name === 'email' ? (0, _email2.default)(value, { text: false }) : (0, _required2.default)(value, { text: false })) === undefined;\n\n                    var newValue = (0, _extends3.default)({}, property, { isValid: isValid });\n                    thisState[name] = newValue;\n\n                    _this.setState((0, _defineProperty3.default)({}, name, newValue));\n                }\n            });\n\n            return thisState;\n        };\n\n        _this.handleSubmit = function (e) {\n            e.preventDefault();\n\n            var email = _this.state.email;\n\n\n            var thisState = _this.handleCheckErrors(Object.keys(_this.state));\n            var isValid = true;\n\n            for (var key in thisState) {\n                if (!(0, _pathOr2.default)(['isValid'], true, thisState[key])) {\n                    isValid = false;\n                }\n            }\n\n            if (isValid) {\n                var formData = new FormData();\n\n                var credentials = {\n                    email: email.value,\n                    password: Math.random().toString(36).slice(2)\n                };\n\n                formData.append('values', JSON.stringify(credentials));\n\n                _this.props.resetPassword(credentials).then(function () {\n                    _this.setState((0, _extends3.default)({}, _this.defaultState(), { isSubmitted: true\n                    }));\n                    setTimeout(function () {\n                        return _this.closePopup();\n                    }, 2000);\n                }).catch(function (e) {\n                    _this.setState({ error: e.error });\n                });\n            }\n        };\n\n        _this.closePopup = function () {\n            _this.handleBackClick();\n            _this.props.handleClose();\n            _this.setState({ isSubmitted: false });\n        };\n\n        _this.handleBackClick = function () {\n            _this.props.handleBackClick();\n        };\n\n        _this.state = (0, _extends3.default)({}, _this.defaultState(), {\n            error: ''\n        });\n        return _this;\n    }\n\n    (0, _createClass3.default)(ResetPasswordFormPopup, [{\n        key: 'defaultState',\n        value: function defaultState() {\n            return {\n                email: { value: '', focus: false, isValid: true },\n                isSubmitted: false\n            };\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (this.props.isOpen !== prevProps.isOpen && !this.props.isOpen) {\n                this.setState((0, _extends3.default)({}, this.defaultState()));\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _React$createElement, _React$createElement2, _React$createElement3, _React$createElement4, _React$createElement5, _React$createElement6, _React$createElement7, _React$createElement8, _React$createElement9, _React$createElement10, _React$createElement11, _React$createElement12, _React$createElement13, _React$createElement14, _React$createElement15, _React$createElement16;\n\n            var _props = this.props,\n                langMap = _props.langMap,\n                isOpen = _props.isOpen;\n            var _state = this.state,\n                isSubmitted = _state.isSubmitted,\n                error = _state.error;\n\n            var text = (0, _propOr2.default)('auth', {}, langMap);\n\n            return _react2.default.createElement(\n                'div',\n                (_React$createElement16 = { className: (0, _classnames2.default)(_ResetPasswordFormPopup2.default.root, (0, _defineProperty3.default)({}, _ResetPasswordFormPopup2.default.isPopupHidden, isOpen)), 'data-qa-file': 'ResetPasswordFormPopup',\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 174\n                    },\n                    __self: this\n                }, (0, _defineProperty3.default)(_React$createElement16, '__self', this), (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement16),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement = { className: _ResetPasswordFormPopup2.default.title, 'data-qa-file': 'ResetPasswordFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 177\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement, '__self', this), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement),\n                    text.passwordRevovery\n                ),\n                _react2.default.createElement(\n                    'form',\n                    (_React$createElement7 = { className: _ResetPasswordFormPopup2.default.form, onSubmit: this.handleSubmit, 'data-qa-file': 'ResetPasswordFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 178\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement7, '__self', this), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement7),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement4 = { className: _ResetPasswordFormPopup2.default.emailContainerField, 'data-qa-file': 'ResetPasswordFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 179\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement4, '__self', this), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement4),\n                        _react2.default.createElement(_FormInput2.default, (_React$createElement2 = {\n                            isError: !this.state['email'].isValid || error,\n                            texts: { email: '' + text.inputs.email.placeholder, emailValidator: error || '' + text.inputs.email.validator },\n                            name: 'email',\n                            onFocus: this.onFocus,\n                            onBlur: this.onBlur,\n                            handleChange: this.handleChange,\n                            value: this.state.email.value,\n                            focus: this.state.email.value,\n                            'data-qa-file': 'ResetPasswordFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 180\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement2, '__self', this), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement2)),\n                        _react2.default.createElement(\n                            'div',\n                            (_React$createElement3 = { className: (0, _classnames2.default)(_ResetPasswordFormPopup2.default.bottomLabel, (0, _defineProperty3.default)({}, _ResetPasswordFormPopup2.default.bottomLabelActive, !error && this.state['email'].isValid)), 'data-qa-file': 'ResetPasswordFormPopup',\n                                __source: {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 190\n                                },\n                                __self: this\n                            }, (0, _defineProperty3.default)(_React$createElement3, '__self', this), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement3),\n                            text.isLogin\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'button',\n                        (_React$createElement5 = { className: (0, _classnames2.default)(_ResetPasswordFormPopup2.default.button), type: 'submit', 'data-qa-file': 'ResetPasswordFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 194\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement5, '__self', this), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement5),\n                        text.newPassword\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement6 = { className: _ResetPasswordFormPopup2.default.forgetPassordButton, onClick: this.handleBackClick, 'data-qa-file': 'ResetPasswordFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 195\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement6, '__self', this), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement6),\n                        text.back\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement15 = { className: (0, _classnames2.default)(_ResetPasswordFormPopup2.default.successContainer, (0, _defineProperty3.default)({}, _ResetPasswordFormPopup2.default.isSuccessPopup, isSubmitted)), 'data-qa-file': 'ResetPasswordFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 197\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement15, '__self', this), (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement15),\n                    _react2.default.createElement('div', (_React$createElement8 = { className: _ResetPasswordFormPopup2.default.cover, 'data-qa-file': 'ResetPasswordFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 200\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement8, '__self', this), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement8)),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement14 = { className: _ResetPasswordFormPopup2.default.popupWrap, 'data-qa-file': 'ResetPasswordFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 201\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement14, '__self', this), (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement14),\n                        _react2.default.createElement(\n                            'div',\n                            (_React$createElement13 = { className: _ResetPasswordFormPopup2.default.popup, 'data-qa-file': 'ResetPasswordFormPopup',\n                                __source: {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 202\n                                },\n                                __self: this\n                            }, (0, _defineProperty3.default)(_React$createElement13, '__self', this), (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement13),\n                            _react2.default.createElement(\n                                'div',\n                                (_React$createElement12 = { className: _ResetPasswordFormPopup2.default.popupContent, 'data-qa-file': 'ResetPasswordFormPopup',\n                                    __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 203\n                                    },\n                                    __self: this\n                                }, (0, _defineProperty3.default)(_React$createElement12, '__self', this), (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement12),\n                                _react2.default.createElement(\n                                    'div',\n                                    (_React$createElement11 = { className: (0, _classnames2.default)(_ResetPasswordFormPopup2.default.content), 'data-qa-file': 'ResetPasswordFormPopup',\n                                        __source: {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 204\n                                        },\n                                        __self: this\n                                    }, (0, _defineProperty3.default)(_React$createElement11, '__self', this), (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement11),\n                                    _react2.default.createElement(\n                                        'div',\n                                        (_React$createElement9 = {\n                                            'data-qa-file': 'ResetPasswordFormPopup',\n                                            __source: {\n                                                fileName: _jsxFileName,\n                                                lineNumber: 205\n                                            },\n                                            __self: this\n                                        }, (0, _defineProperty3.default)(_React$createElement9, '__self', this), (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement9),\n                                        text.titleReset\n                                    ),\n                                    _react2.default.createElement('img', (_React$createElement10 = { src: '/src/apps/client/ui/components/ResetPasswordFormPopup/images/circle.svg', alt: '', 'data-qa-file': 'ResetPasswordFormPopup',\n                                        __source: {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 206\n                                        },\n                                        __self: this\n                                    }, (0, _defineProperty3.default)(_React$createElement10, '__self', this), (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'ResetPasswordFormPopup'), (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'ResetPasswordFormPopup'), _React$createElement10))\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return ResetPasswordFormPopup;\n}(_react.Component), _class.propTypes = {\n    langMap: _propTypes2.default.object.isRequired,\n    isOpen: _propTypes2.default.bool.isRequired,\n    handleBackClick: _propTypes2.default.func,\n    sendForm: _propTypes2.default.func.isRequired,\n    resetPassword: _propTypes2.default.func.isRequired,\n    handleClose: _propTypes2.default.func.isRequired\n}, _class.defaultProps = {\n    handleBackClick: _noop2.default,\n    handleClose: _noop2.default\n}, _temp);\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(ResetPasswordFormPopup);",{"version":3,"sources":["src\\apps\\client\\ui\\components\\ResetPasswordFormPopup\\ResetPasswordFormPopup.jsx"],"names":["mapStateToProps","application","langMap","mapDispatchToProps","dispatch","sendForm","payload","resetPassword","ResetPasswordFormPopup","props","handleChange","name","value","e","stopPropagation","actualValue","target","length","state","maxLength","setState","focus","isValid","onFocus","onBlur","currentState","handleCheckErrors","names","thisState","forEach","property","text","undefined","newValue","handleSubmit","preventDefault","email","Object","keys","key","formData","FormData","credentials","password","Math","random","toString","slice","append","JSON","stringify","then","defaultState","isSubmitted","setTimeout","closePopup","catch","error","handleBackClick","handleClose","prevProps","isOpen","styles","root","isPopupHidden","title","passwordRevovery","form","emailContainerField","inputs","placeholder","emailValidator","validator","bottomLabel","bottomLabelActive","isLogin","button","newPassword","forgetPassordButton","back","successContainer","isSuccessPopup","cover","popupWrap","popup","popupContent","content","titleReset","Component","propTypes","PropTypes","object","isRequired","bool","func","defaultProps","noop"],"mappings":"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","file":"ResetPasswordFormPopup.jsx","sourceRoot":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\n\nimport propOr from '@tinkoff/utils/object/propOr';\nimport noop from '@tinkoff/utils/function/noop';\nimport pathOr from '@tinkoff/utils/object/pathOr';\nimport isUndefined from '@tinkoff/utils/is/undefined';\nimport isObject from '@tinkoff/utils/is/object';\nimport isArray from '@tinkoff/utils/is/array';\n\nimport required from '../Form/validators/required';\nimport email from '../Form/validators/email';\nimport FormInput from '../FormInput/FormInput';\n\nimport styles from './ResetPasswordFormPopup.css';\n\nimport sendForm from '../../../services/client/sendForm';\nimport resetPassword from '../../../services/client/resetPassword';\n\nconst mapStateToProps = ({ application }) => {\n    return {\n        langMap: application.langMap\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    sendForm: payload => dispatch(sendForm(payload)),\n    resetPassword: payload => dispatch(resetPassword(payload))\n});\n\nclass ResetPasswordFormPopup extends Component {\n    static propTypes = {\n        langMap: PropTypes.object.isRequired,\n        isOpen: PropTypes.bool.isRequired,\n        handleBackClick: PropTypes.func,\n        sendForm: PropTypes.func.isRequired,\n        resetPassword: PropTypes.func.isRequired,\n        handleClose: PropTypes.func.isRequired\n    };\n\n    static defaultProps = {\n        handleBackClick: noop,\n        handleClose: noop\n    };\n\n    constructor (props) {\n        super(props);\n        this.state = {\n            ...this.defaultState(),\n            error: ''\n        };\n    }\n\n    defaultState () {\n        return {\n            email: { value: '', focus: false, isValid: true },\n            isSubmitted: false\n        };\n    };\n\n    componentDidUpdate (prevProps) {\n        if (this.props.isOpen !== prevProps.isOpen && !this.props.isOpen) {\n            this.setState({\n                ...this.defaultState()\n            });\n        }\n    }\n\n    handleChange = (name, value) => e => {\n        e.stopPropagation();\n        const actualValue = isUndefined(value) ? e.target.value : value;\n\n        if (actualValue.length > this.state.maxLength) return;\n\n        this.setState({\n            [name]: { ...this.state[name], value: actualValue, focus: isUndefined(value), isValid: true }\n        });\n    };\n\n    onFocus = name => e => {\n        e.stopPropagation();\n        this.setState({\n            [name]: { ...this.state[name], focus: !this.state[name].focus }\n        });\n    };\n\n    onBlur = name => {\n        const currentState = this.handleCheckErrors([name]);\n\n        this.setState({\n            [name]: { ...this.state[name], focus: false, isValid: currentState[name].isValid }\n        });\n    };\n\n    handleCheckErrors = (names = []) => {\n        const thisState = {};\n\n        names.forEach(name => {\n            const property = this.state[name];\n\n            if (isObject(property) && !isArray(property)) {\n                const value = this.state[name].value;\n                let isValid = (\n                    name === 'email' ? email(value, { text: false })\n                        : required(value, { text: false })) === undefined;\n\n                const newValue = { ...property, isValid };\n                thisState[name] = newValue;\n\n                this.setState({\n                    [name]: newValue\n                });\n            }\n        });\n\n        return thisState;\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n\n        const { email } = this.state;\n\n        const thisState = this.handleCheckErrors(Object.keys(this.state));\n        let isValid = true;\n\n        for (let key in thisState) {\n            if (!pathOr(['isValid'], true, thisState[key])) {\n                isValid = false;\n            }\n        }\n\n        if (isValid) {\n            const formData = new FormData();\n\n            const credentials = {\n                email: email.value,\n                password: Math.random().toString(36).slice(2)\n            };\n\n            formData.append('values', JSON.stringify(credentials));\n\n            this.props.resetPassword(credentials)\n                .then(() => {\n                    this.setState({\n                        ...this.defaultState(), isSubmitted: true\n                    });\n                    setTimeout(() => this.closePopup(), 2000);\n                })\n                .catch(e => {\n                    this.setState({ error: e.error });\n                });\n        }\n    };\n\n    closePopup = () => {\n        this.handleBackClick();\n        this.props.handleClose();\n        this.setState({ isSubmitted: false });\n    };\n\n    handleBackClick = () => {\n        this.props.handleBackClick();\n    }\n\n    render () {\n        const { langMap, isOpen } = this.props;\n        const { isSubmitted, error } = this.state;\n        const text = propOr('auth', {}, langMap);\n\n        return (\n            <div className={classNames(styles.root, {\n                [styles.isPopupHidden]: isOpen\n            })}>\n                <div className={styles.title}>{text.passwordRevovery}</div>\n                <form className={styles.form} onSubmit={this.handleSubmit} >\n                    <div className={styles.emailContainerField}>\n                        <FormInput\n                            isError={!this.state['email'].isValid || error}\n                            texts={{ email: `${text.inputs.email.placeholder}`, emailValidator: error || `${text.inputs.email.validator}` }}\n                            name='email'\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            handleChange={this.handleChange}\n                            value={this.state.email.value}\n                            focus={this.state.email.value}\n                        />\n                        <div className={classNames(styles.bottomLabel, {\n                            [styles.bottomLabelActive]: !error && this.state['email'].isValid\n                        })}>{text.isLogin}</div>\n                    </div>\n                    <button className={classNames(styles.button)} type='submit'>{text.newPassword}</button>\n                    <div className={styles.forgetPassordButton} onClick={this.handleBackClick}>{text.back}</div>\n                </form>\n                <div className={classNames(styles.successContainer, {\n                    [styles.isSuccessPopup]: isSubmitted\n                })}>\n                    <div className={styles.cover} />\n                    <div className={styles.popupWrap}>\n                        <div className={styles.popup}>\n                            <div className={styles.popupContent}>\n                                <div className={classNames(styles.content)}>\n                                    <div>{text.titleReset}</div>\n                                    <img src=\"/src/apps/client/ui/components/ResetPasswordFormPopup/images/circle.svg\" alt=\"\" />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPasswordFormPopup);\n"]}]}