{"remainingRequest":"/home/vps/ppf/node_modules/babel-loader/lib/index.js??ref--13-2!/home/vps/ppf/src/apps/admin/services/outputWebsocket.js","dependencies":[{"path":"/home/vps/ppf/src/apps/admin/services/outputWebsocket.js","mtime":1671132825372},{"path":"/home/vps/ppf/.babelrc","mtime":1671127885972},{"path":"/home/vps/ppf/node_modules/cache-loader/dist/cjs.js","mtime":1671127657171},{"path":"/home/vps/ppf/node_modules/babel-loader/lib/index.js","mtime":1671127654997}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _socket = require('socket.io-client');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nvar _constants = require('../constants/constants');\n\nvar _eventemitter = require('eventemitter3');\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar WEBSOCKET_URL = process.env.NODE_ENV === 'production' ? 'wss://deltaway.io:6060' : 'ws://localhost:6060';\n\nvar OutputWebsocketController = function () {\n    function OutputWebsocketController() {\n        (0, _classCallCheck3.default)(this, OutputWebsocketController);\n        this.events = new _eventemitter2.default();\n    }\n\n    (0, _createClass3.default)(OutputWebsocketController, [{\n        key: 'connect',\n        value: function connect() {\n            var _this = this;\n\n            var socket = (0, _socket2.default)(WEBSOCKET_URL, { transports: ['websocket'] });\n\n            this.socket = socket;\n\n            socket.on('connect', function () {\n                var token = localStorage.getItem(_constants.TOKEN_LOCAL_STORAGE_NAME);\n\n                socket.emit('token', {\n                    type: 'admin',\n                    token: token\n                });\n            });\n\n            socket.on('output', function (data) {\n                _this.events.emit('output', data);\n            });\n        }\n    }, {\n        key: 'disconnect',\n        value: function disconnect() {\n            this.socket && this.socket.disconnect();\n            this.socket = null;\n        }\n    }]);\n    return OutputWebsocketController;\n}();\n\nvar outputWebsocketController = new OutputWebsocketController();\n\nexports.default = outputWebsocketController;\noutputWebsocketController.i = 'outputWebsocketController';\noutputWebsocketController.i = 'outputWebsocketController';",null]}