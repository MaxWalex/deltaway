{"remainingRequest":"/Users/dimasabitov/Downloads/deltaway.20/node_modules/babel-loader/lib/index.js??ref--13-2!/Users/dimasabitov/Downloads/deltaway.20/src/apps/client/ui/hocs/media/media.jsx","dependencies":[{"path":"/Users/dimasabitov/Downloads/deltaway.20/src/apps/client/ui/hocs/media/media.jsx","mtime":1671546468683},{"path":"/Users/dimasabitov/Downloads/deltaway.20/.babelrc","mtime":1671546158632},{"path":"/Users/dimasabitov/Downloads/deltaway.20/node_modules/cache-loader/dist/cjs.js","mtime":1671546959174},{"path":"/Users/dimasabitov/Downloads/deltaway.20/node_modules/babel-loader/lib/index.js","mtime":1671546957682}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends3 = require('babel-runtime/helpers/extends');\n\nvar _extends4 = _interopRequireDefault(_extends3);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jsxFileName = '/Users/dimasabitov/Downloads/deltaway.20/src/apps/client/ui/hocs/media/media.jsx';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _setMediaInfo2 = require('../../../actions/setMediaInfo');\n\nvar _setMediaInfo3 = _interopRequireDefault(_setMediaInfo2);\n\nvar _mediaBreakpoints = require('./mediaBreakpoints');\n\nvar _mediaBreakpoints2 = _interopRequireDefault(_mediaBreakpoints);\n\nvar _lodash = require('lodash.debounce');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _map = require('@tinkoff/utils/object/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _pathOr = require('@tinkoff/utils/object/pathOr');\n\nvar _pathOr2 = _interopRequireDefault(_pathOr);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEBOUNCE_DURATION = 300;\n\nvar isLandscape = function isLandscape() {\n    if (window.orientation) {\n        return { matches: Math.abs(window.orientation) === 90 };\n    }\n\n    return { matches: (0, _pathOr2.default)(['screen', 'orientation', 'type'], '', window)[0] === 'landscape' };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n        setMediaInfo: function setMediaInfo(payload) {\n            return dispatch((0, _setMediaInfo3.default)(payload));\n        }\n    };\n};\n\nvar media = function media(WrappedComponent) {\n    var _class, _temp;\n\n    var Media = (_temp = _class = function (_PureComponent) {\n        (0, _inherits3.default)(Media, _PureComponent);\n\n        function Media() {\n            var _ref;\n\n            (0, _classCallCheck3.default)(this, Media);\n\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = Media.__proto__ || Object.getPrototypeOf(Media)).call.apply(_ref, [this].concat(args)));\n\n            _this.updateMediaInfo = function () {\n                return _this.props.setMediaInfo(_this.getMediaInfo());\n            };\n\n            _this.getMediaInfo = function () {\n                return (0, _extends4.default)({}, (0, _map2.default)(function (value) {\n                    var query = window.matchMedia(value);\n\n                    return query.matches;\n                }, _mediaBreakpoints2.default), {\n                    landscape: isLandscape().matches,\n                    width: window.innerWidth,\n                    height: window.innerHeight\n                });\n            };\n\n            if (typeof window !== 'undefined') {\n                _this.updateMediaInfo();\n            }\n            _this.updateMediaInfoDebounced = (0, _lodash2.default)(function () {\n                return _this.props.setMediaInfo(_this.getMediaInfo());\n            }, DEBOUNCE_DURATION);\n            return _this;\n        }\n\n        (0, _createClass3.default)(Media, [{\n            key: 'componentDidMount',\n            value: function componentDidMount() {\n                if (typeof window === 'undefined') {\n                    return;\n                }\n\n                this.updateMediaInfo();\n\n                window.addEventListener('resize', this.updateMediaInfoDebounced);\n            }\n        }, {\n            key: 'componentWillUnmount',\n            value: function componentWillUnmount() {\n                window.removeEventListener('resize', this.updateMediaInfoDebounced);\n            }\n        }, {\n            key: 'render',\n            value: function render() {\n                return _react2.default.createElement(WrappedComponent, (0, _extends4.default)({}, this.props, (0, _defineProperty3.default)({\n                    'data-qa-file': 'media',\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 70\n                    },\n                    __self: this\n                }, '__self', this)));\n            }\n        }]);\n        return Media;\n    }(_react.PureComponent), _class.propTypes = {\n        setMediaInfo: _propTypes2.default.func.isRequired\n    }, _temp);\n\n\n    return (0, _reactRedux.connect)(undefined, mapDispatchToProps)(Media);\n};\n\nexports.default = media;",{"version":3,"sources":["src/apps/client/ui/hocs/media/media.jsx"],"names":["DEBOUNCE_DURATION","isLandscape","window","orientation","matches","Math","abs","mapDispatchToProps","dispatch","setMediaInfo","payload","media","Media","args","updateMediaInfo","props","getMediaInfo","query","matchMedia","value","bp","landscape","width","innerWidth","height","innerHeight","updateMediaInfoDebounced","addEventListener","removeEventListener","PureComponent","propTypes","PropTypes","func","isRequired","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,oBAAoB,GAA1B;;AAEA,IAAMC,cAAc,SAAdA,WAAc,GAAM;AACtB,QAAIC,OAAOC,WAAX,EAAwB;AACpB,eAAO,EAAEC,SAASC,KAAKC,GAAL,CAASJ,OAAOC,WAAhB,MAAiC,EAA5C,EAAP;AACH;;AAED,WAAO,EAAEC,SAAS,sBAAO,CAAC,QAAD,EAAW,aAAX,EAA0B,MAA1B,CAAP,EAA0C,EAA1C,EAA8CF,MAA9C,EAAsD,CAAtD,MAA6D,WAAxE,EAAP;AACH,CAND;;AAQA,IAAMK,qBAAqB,SAArBA,kBAAqB,CAACC,QAAD;AAAA,WAAe;AACtCC,sBAAc;AAAA,mBAAWD,SAAS,4BAAaE,OAAb,CAAT,CAAX;AAAA;AADwB,KAAf;AAAA,CAA3B;;AAIA,IAAMC,QAAQ,SAARA,KAAQ,mBAAoB;AAAA;;AAAA,QACxBC,KADwB;AAAA;;AAM1B,yBAAsB;AAAA;;AAAA;;AAAA,8CAANC,IAAM;AAANA,oBAAM;AAAA;;AAAA,+JACTA,IADS;;AAAA,kBAuBtBC,eAvBsB,GAuBJ;AAAA,uBAAM,MAAKC,KAAL,CAAWN,YAAX,CAAwB,MAAKO,YAAL,EAAxB,CAAN;AAAA,aAvBI;;AAAA,kBAyBtBA,YAzBsB,GAyBP;AAAA,kDACR,mBAAI,iBAAS;AACZ,wBAAMC,QAAQf,OAAOgB,UAAP,CAAkBC,KAAlB,CAAd;;AAEA,2BAAOF,MAAMb,OAAb;AACH,iBAJE,EAIAgB,0BAJA,CADQ;AAMXC,+BAAWpB,cAAcG,OANd;AAOXkB,2BAAOpB,OAAOqB,UAPH;AAQXC,4BAAQtB,OAAOuB;AARJ;AAAA,aAzBO;;AAGlB,gBAAI,OAAOvB,MAAP,KAAkB,WAAtB,EAAmC;AAC/B,sBAAKY,eAAL;AACH;AACD,kBAAKY,wBAAL,GAAgC,sBAAS;AAAA,uBAAM,MAAKX,KAAL,CAAWN,YAAX,CAAwB,MAAKO,YAAL,EAAxB,CAAN;AAAA,aAAT,EAA6DhB,iBAA7D,CAAhC;AANkB;AAOrB;;AAbyB;AAAA;AAAA,gDAeL;AACjB,oBAAI,OAAOE,MAAP,KAAkB,WAAtB,EAAmC;AAC/B;AACH;;AAED,qBAAKY,eAAL;;AAEAZ,uBAAOyB,gBAAP,CAAwB,QAAxB,EAAkC,KAAKD,wBAAvC;AACH;AAvByB;AAAA;AAAA,mDAyBF;AACpBxB,uBAAO0B,mBAAP,CAA2B,QAA3B,EAAqC,KAAKF,wBAA1C;AACH;AA3ByB;AAAA;AAAA,qCA0ChB;AACN,uBAAO,8BAAC,gBAAD,6BACC,KAAKX,KADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAAP;AAGH;AA9CyB;AAAA;AAAA,MACVc,oBADU,UAEnBC,SAFmB,GAEP;AACfrB,sBAAcsB,oBAAUC,IAAV,CAAeC;AADd,KAFO;;;AAiD9B,WAAO,yBAAQC,SAAR,EAAmB3B,kBAAnB,EAAuCK,KAAvC,CAAP;AACH,CAlDD;;kBAoDeD,K","file":"media.jsx","sourceRoot":"/Users/dimasabitov/Downloads/deltaway.20","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { connect } from 'react-redux';\nimport setMediaInfo from '../../../actions/setMediaInfo';\n\nimport bp from './mediaBreakpoints';\n\nimport debounce from 'lodash.debounce';\nimport map from '@tinkoff/utils/object/map';\nimport pathOr from '@tinkoff/utils/object/pathOr';\n\nconst DEBOUNCE_DURATION = 300;\n\nconst isLandscape = () => {\n    if (window.orientation) {\n        return { matches: Math.abs(window.orientation) === 90 };\n    }\n\n    return { matches: pathOr(['screen', 'orientation', 'type'], '', window)[0] === 'landscape' };\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    setMediaInfo: payload => dispatch(setMediaInfo(payload))\n});\n\nconst media = WrappedComponent => {\n    class Media extends PureComponent {\n        static propTypes = {\n            setMediaInfo: PropTypes.func.isRequired\n        };\n\n        constructor (...args) {\n            super(...args);\n\n            if (typeof window !== 'undefined') {\n                this.updateMediaInfo();\n            }\n            this.updateMediaInfoDebounced = debounce(() => this.props.setMediaInfo(this.getMediaInfo()), DEBOUNCE_DURATION);\n        }\n\n        componentDidMount () {\n            if (typeof window === 'undefined') {\n                return;\n            }\n\n            this.updateMediaInfo();\n\n            window.addEventListener('resize', this.updateMediaInfoDebounced);\n        }\n\n        componentWillUnmount () {\n            window.removeEventListener('resize', this.updateMediaInfoDebounced);\n        }\n\n        updateMediaInfo = () => this.props.setMediaInfo(this.getMediaInfo());\n\n        getMediaInfo = () => ({\n            ...map(value => {\n                const query = window.matchMedia(value);\n\n                return query.matches;\n            }, bp),\n            landscape: isLandscape().matches,\n            width: window.innerWidth,\n            height: window.innerHeight\n        });\n\n        render () {\n            return <WrappedComponent\n                {...this.props}\n            />;\n        }\n    }\n\n    return connect(undefined, mapDispatchToProps)(Media);\n};\n\nexport default media;\n"]}]}