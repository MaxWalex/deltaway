{"remainingRequest":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js??ref--13-2!C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\client\\ui\\components\\RegistrationFormPopup\\RegistrationFormPopup.jsx","dependencies":[{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\client\\ui\\components\\RegistrationFormPopup\\RegistrationFormPopup.jsx","mtime":1671547254000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\.babelrc","mtime":1671546158000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1671546958000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js","mtime":1671546956000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends4 = require('babel-runtime/helpers/extends');\n\nvar _extends5 = _interopRequireDefault(_extends4);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class,\n    _temp,\n    _jsxFileName = 'C:\\\\Users\\\\cherv\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\deltaway.20\\\\src\\\\apps\\\\client\\\\ui\\\\components\\\\RegistrationFormPopup\\\\RegistrationFormPopup.jsx';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _reactDatepicker = require('react-datepicker');\n\nvar _reactDatepicker2 = _interopRequireDefault(_reactDatepicker);\n\nvar _reactInputMask = require('react-input-mask');\n\nvar _reactInputMask2 = _interopRequireDefault(_reactInputMask);\n\nvar _format = require('date-fns/format');\n\nvar _format2 = _interopRequireDefault(_format);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _undefined = require('@tinkoff/utils/is/undefined');\n\nvar _undefined2 = _interopRequireDefault(_undefined);\n\nvar _object = require('@tinkoff/utils/is/object');\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _array = require('@tinkoff/utils/is/array');\n\nvar _array2 = _interopRequireDefault(_array);\n\nvar _propOr = require('@tinkoff/utils/object/propOr');\n\nvar _propOr2 = _interopRequireDefault(_propOr);\n\nvar _pathOr = require('@tinkoff/utils/object/pathOr');\n\nvar _pathOr2 = _interopRequireDefault(_pathOr);\n\nvar _required = require('../Form/validators/required');\n\nvar _required2 = _interopRequireDefault(_required);\n\nvar _email = require('../Form/validators/email');\n\nvar _email2 = _interopRequireDefault(_email);\n\nvar _phone = require('../Form/validators/phone');\n\nvar _phone2 = _interopRequireDefault(_phone);\n\nvar _FormInput = require('../FormInput/FormInput');\n\nvar _FormInput2 = _interopRequireDefault(_FormInput);\n\nvar _RegistrationFormPopup = require('./RegistrationFormPopup.css');\n\nvar _RegistrationFormPopup2 = _interopRequireDefault(_RegistrationFormPopup);\n\nvar _saveUser2 = require('../../../services/client/saveUser');\n\nvar _saveUser3 = _interopRequireDefault(_saveUser2);\n\nvar _logIn2 = require('../../../services/client/logIn');\n\nvar _logIn3 = _interopRequireDefault(_logIn2);\n\nvar _setAuthenticationPopup2 = require('../../../actions/setAuthenticationPopup');\n\nvar _setAuthenticationPopup3 = _interopRequireDefault(_setAuthenticationPopup2);\n\nvar _checkAuthentication2 = require('../../../services/client/checkAuthentication');\n\nvar _checkAuthentication3 = _interopRequireDefault(_checkAuthentication2);\n\nvar _CountrySelector = require('../CountrySelector/CountrySelector');\n\nvar _CountrySelector2 = _interopRequireDefault(_CountrySelector);\n\nvar _constants = require('../../../constants/constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MOBILE_VERRSION = 920;\n\nvar mapStateToProps = function mapStateToProps(_ref) {\n    var application = _ref.application,\n        data = _ref.data;\n\n    return {\n        langMap: application.langMap,\n        user: data.user,\n        mediaWidth: application.media.width\n    };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n        logIn: function logIn(payload) {\n            return dispatch((0, _logIn3.default)(payload));\n        },\n        saveUser: function saveUser() {\n            return dispatch(_saveUser3.default.apply(undefined, arguments));\n        },\n        setAuthenticationPopup: function setAuthenticationPopup(payload) {\n            return dispatch((0, _setAuthenticationPopup3.default)(payload));\n        },\n        checkAuthentication: function checkAuthentication(payload) {\n            return dispatch((0, _checkAuthentication3.default)(payload));\n        }\n    };\n};\n\nvar RegistrationFormPopup = (_temp = _class = function (_Component) {\n    (0, _inherits3.default)(RegistrationFormPopup, _Component);\n\n    function RegistrationFormPopup(props) {\n        (0, _classCallCheck3.default)(this, RegistrationFormPopup);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (RegistrationFormPopup.__proto__ || Object.getPrototypeOf(RegistrationFormPopup)).call(this, props));\n\n        _this.handleChange = function (name, value) {\n            return function (e) {\n                e.stopPropagation();\n                var actualValue = (0, _undefined2.default)(value) ? e.target.value : value;\n\n                if (actualValue.length > _this.state.maxLength) return;\n\n                _this.setState((0, _defineProperty3.default)({}, name, (0, _extends5.default)({}, _this.state[name], { value: actualValue, focus: (0, _undefined2.default)(value), isValid: true })));\n            };\n        };\n\n        _this.onFocus = function (name) {\n            return function (e) {\n                e.stopPropagation();\n                _this.setState((0, _defineProperty3.default)({}, name, (0, _extends5.default)({}, _this.state[name], { focus: !_this.state[name].focus })));\n            };\n        };\n\n        _this.onBlur = function (name) {\n            var currentState = _this.handleCheckErrors([name]);\n\n            _this.setState((0, _defineProperty3.default)({}, name, (0, _extends5.default)({}, _this.state[name], { focus: false, isValid: currentState[name].isValid })));\n        };\n\n        _this.handleCheckErrors = function () {\n            var names = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n            var thisState = {};\n\n            names.forEach(function (name) {\n                var property = _this.state[name];\n\n                if ((0, _object2.default)(property) && !(0, _array2.default)(property)) {\n                    var value = _this.state[name].value;\n                    var isValid = (name === 'phone' ? (0, _phone2.default)(value, { text: false }) : name === 'email' ? (0, _email2.default)(value, { text: false }) : (0, _required2.default)(value, { text: false })) === undefined;\n\n                    if (name === 'date' && !_this.state.date.value) {\n                        isValid = false;\n                    }\n\n                    if (name === 'password' && !!_this.state[name].value.length && _this.state[name].value.length < 8) {\n                        isValid = false;\n                    }\n\n                    if (name === 'dateInputMaskValue' && _this.props.mediaWidth < MOBILE_VERRSION && _this.state.dateInputMaskValue.value.includes('_') || name === 'dateInputMaskValue' && !_this.state.dateInputMaskValue.value) {\n                        isValid = false;\n                    }\n\n                    var newValue = (0, _extends5.default)({}, property, { isValid: isValid });\n                    thisState[name] = newValue;\n\n                    _this.setState((0, _defineProperty3.default)({}, name, newValue));\n                }\n            });\n\n            return thisState;\n        };\n\n        _this.handleSubmit = function (e) {\n            e.preventDefault();\n\n            var _this$state = _this.state,\n                name = _this$state.name,\n                surname = _this$state.surname,\n                email = _this$state.email,\n                password = _this$state.password,\n                phone = _this$state.phone,\n                date = _this$state.date,\n                confirm = _this$state.confirm,\n                activeCountry = _this$state.activeCountry;\n\n\n            var thisState = _this.handleCheckErrors(Object.keys({\n                name: name,\n                surname: surname,\n                email: email,\n                password: password,\n                phone: phone,\n                date: date,\n                confirm: confirm\n            }));\n            var isValid = true;\n\n            for (var key in thisState) {\n                if (!(0, _pathOr2.default)(['isValid'], true, thisState[key])) {\n                    isValid = false;\n                }\n            }\n\n            if (isValid) {\n                var user = {\n                    name: name.value,\n                    surname: surname.value,\n                    email: email.value,\n                    password: password.value,\n                    phone: phone.value,\n                    date: _this.props.mediaWidth < MOBILE_VERRSION ? date.value : Date.parse(date.value),\n                    country: activeCountry.name\n                };\n\n                var credentials = {\n                    email: email.value.trim(),\n                    password: password.value.trim()\n                };\n\n                _this.props.saveUser(user).then(function () {\n                    _this.setState((0, _extends5.default)({}, _this.defaultState()), function () {\n                        return _this.props.logIn(credentials).then(function () {\n                            _this.props.checkAuthentication();\n                        });\n                    });\n                    _this.closePopup();\n                }).catch(function (e) {\n                    return _this.setState({ error: e.message });\n                });\n            }\n        };\n\n        _this.closePopup = function () {\n            _this.props.setAuthenticationPopup(false);\n        };\n\n        _this.handlerCheckBoxClick = function (type) {\n            return function () {\n                _this.setState((0, _defineProperty3.default)({}, type, (0, _extends5.default)({}, _this.state[type], { value: !_this.state[type].value })));\n            };\n        };\n\n        _this.handlerShowPassword = function () {\n            _this.setState({ isPasswordShown: !_this.state.isPasswordShown });\n        };\n\n        _this.handleSetCountry = function (country) {\n            _this.setState({ activeCountry: country, phone: (0, _extends5.default)({}, _this.state.phone, { value: _this.state.phone.value }) });\n        };\n\n        _this.setInitialDate = function () {\n            var dataArr = _this.state.date.value.split('.');\n            return _this.state.date.value ? new Date(dataArr[2], dataArr[1], dataArr[0]) : new Date();\n        };\n\n        _this.setStartDate = function (date) {\n            if (_this.props.mediaWidth >= MOBILE_VERRSION) {\n                _this.setState({\n                    date: (0, _extends5.default)({}, _this.state.date, { value: date, isValid: !!date })\n                });\n                return;\n            }\n            _this.setState({\n                date: (0, _extends5.default)({}, _this.state.date, { value: Date.parse(date) })\n            });\n        };\n\n        _this.setMobileStartDate = function (e) {\n            var _e$target$value$split = e.target.value.split('.').map(function (i) {\n                return i.replace(/_/g, '');\n            }),\n                _e$target$value$split2 = (0, _slicedToArray3.default)(_e$target$value$split, 3),\n                day = _e$target$value$split2[0],\n                month = _e$target$value$split2[1],\n                year = _e$target$value$split2[2];\n\n            _this.setState({\n                date: (0, _extends5.default)({}, _this.state.date, { value: new Date().setFullYear(year, month - 1, day) }),\n                dateInputMaskValue: (0, _extends5.default)({}, _this.state.dateInputMaskValue, { value: e.target.value })\n            });\n        };\n\n        _this.getDate = function (currentDate) {\n            if (!currentDate) {\n                return;\n            }\n\n            var date = new Date(currentDate);\n\n            return (0, _format2.default)(date, 'dd.MM.yyyy');\n        };\n\n        _this.handleIsMobileVersion = function () {\n            var _this$state2 = _this.state,\n                dateInputMaskValue = _this$state2.dateInputMaskValue,\n                date = _this$state2.date;\n\n\n            if (_this.props.mediaWidth >= MOBILE_VERRSION && dateInputMaskValue.value) {\n                _this.setState({\n                    date: (0, _extends5.default)({}, date, { value: date.value }),\n                    dateInputMaskValue: (0, _extends5.default)({}, dateInputMaskValue, { value: '' })\n                });\n            }\n\n            if (_this.props.mediaWidth < MOBILE_VERRSION && !dateInputMaskValue.value) {\n                _this.setState({\n                    date: (0, _extends5.default)({}, date, { value: date.value }),\n                    dateInputMaskValue: (0, _extends5.default)({}, dateInputMaskValue, { value: _this.getDate(date.value) || '__.__.____' })\n                });\n            }\n        };\n\n        _this.state = (0, _extends5.default)({}, _this.defaultState(), {\n            isPasswordShown: false,\n            error: null,\n            activeCountry: _this.props.user ? _this.props.user.country : _constants.COUNTRY_INFO[0]\n        });\n        _this.phoneContainerRef = _react2.default.createRef();\n        _this.callingCodeRef = _react2.default.createRef();\n        return _this;\n    }\n\n    (0, _createClass3.default)(RegistrationFormPopup, [{\n        key: 'defaultState',\n        value: function defaultState() {\n            return {\n                name: { value: '', focus: false, isValid: true },\n                surname: { value: '', focus: false, isValid: true },\n                email: { value: '', focus: false, isValid: true },\n                password: { value: '', focus: false, isValid: true },\n                phone: { value: '', focus: false, isValid: true },\n                date: { value: null, focus: false, isValid: true },\n                confirm: { value: false, focus: false, isValid: true },\n                dateInputMaskValue: { value: '', focus: false, isValid: true }\n            };\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.handleIsMobileVersion();\n            this.phoneContainerRef.current.firstChild.firstChild.style.paddingLeft = this.callingCodeRef.current.offsetWidth + 61 + 'px';\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (prevProps.user !== this.props.user && prevProps.user) {\n                this.setState((0, _extends5.default)({}, this.defaultState(), {\n                    activeCountry: _constants.COUNTRY_INFO[0],\n                    error: false\n                }));\n            }\n\n            if (prevProps.isVisible !== this.props.isVisible && !this.props.isVisible) {\n                this.setState((0, _extends5.default)({}, this.defaultState()));\n            }\n\n            this.handleIsMobileVersion();\n            this.phoneContainerRef.current.firstChild.firstChild.style.paddingLeft = this.callingCodeRef.current.offsetWidth + 61 + 'px';\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _React$createElement,\n                _React$createElement2,\n                _React$createElement3,\n                _React$createElement4,\n                _React$createElement5,\n                _React$createElement6,\n                _React$createElement7,\n                _React$createElement8,\n                _React$createElement9,\n                _React$createElement10,\n                _React$createElement11,\n                _React$createElement12,\n                _classNames3,\n                _React$createElement13,\n                _this2 = this,\n                _React$createElement14,\n                _React$createElement15,\n                _React$createElement16,\n                _React$createElement17,\n                _React$createElement18,\n                _React$createElement19,\n                _React$createElement20,\n                _React$createElement21,\n                _React$createElement22,\n                _React$createElement23,\n                _React$createElement24,\n                _React$createElement25,\n                _React$createElement26,\n                _React$createElement27,\n                _React$createElement28;\n\n            var langMap = this.props.langMap;\n            var _state = this.state,\n                confirm = _state.confirm,\n                isPasswordShown = _state.isPasswordShown,\n                error = _state.error,\n                activeCountry = _state.activeCountry;\n\n            var text = (0, _propOr2.default)('auth', {}, langMap);\n\n            return [_react2.default.createElement(\n                'form',\n                (_React$createElement28 = { key: 0, className: _RegistrationFormPopup2.default.form, onSubmit: this.handleSubmit, 'data-qa-file': 'RegistrationFormPopup',\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 312\n                    },\n                    __self: this\n                }, (0, _defineProperty3.default)(_React$createElement28, '__self', this), (0, _defineProperty3.default)(_React$createElement28, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement28, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement28),\n                _react2.default.createElement(_FormInput2.default, (_React$createElement = {\n                    isError: !this.state['name'].isValid,\n                    texts: { name: '' + text.inputs.name.placeholder, nameValidator: '' + text.inputs.name.validator },\n                    name: 'name',\n                    onFocus: this.onFocus,\n                    onBlur: this.onBlur,\n                    handleChange: this.handleChange,\n                    value: this.state.name.value,\n                    focus: this.state.name.focus,\n                    'data-qa-file': 'RegistrationFormPopup',\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 313\n                    },\n                    __self: this\n                }, (0, _defineProperty3.default)(_React$createElement, '__self', this), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement)),\n                _react2.default.createElement(_FormInput2.default, (_React$createElement2 = {\n                    isError: !this.state['surname'].isValid,\n                    texts: { surname: '' + text.inputs.surname.placeholder, surnameValidator: '' + text.inputs.surname.validator },\n                    name: 'surname',\n                    onFocus: this.onFocus,\n                    onBlur: this.onBlur,\n                    handleChange: this.handleChange,\n                    value: this.state.surname.value,\n                    focus: this.state.surname.focus,\n                    'data-qa-file': 'RegistrationFormPopup',\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 323\n                    },\n                    __self: this\n                }, (0, _defineProperty3.default)(_React$createElement2, '__self', this), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement2)),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement5 = { className: _RegistrationFormPopup2.default.emailContainerField, 'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 333\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement5, '__self', this), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement5),\n                    _react2.default.createElement(_FormInput2.default, (_React$createElement3 = {\n                        isError: !this.state['email'].isValid,\n                        texts: { email: '' + text.inputs.email.placeholder, emailValidator: '' + text.inputs.email.validator },\n                        name: 'email',\n                        onFocus: this.onFocus,\n                        onBlur: this.onBlur,\n                        handleChange: this.handleChange,\n                        value: this.state.email.value,\n                        focus: this.state.email.focus,\n                        activeStyle: true,\n                        'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 334\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement3, '__self', this), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement3)),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement4 = { className: (0, _classnames2.default)(_RegistrationFormPopup2.default.bottomLabel, (0, _defineProperty3.default)({}, _RegistrationFormPopup2.default.bottomLabelActive, this.state['email'].isValid)), 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 345\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement4, '__self', this), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement4),\n                        text.isLogin\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement7 = { className: _RegistrationFormPopup2.default.passwordContainerField, 'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 349\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement7, '__self', this), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement7),\n                    _react2.default.createElement(_FormInput2.default, (0, _extends5.default)({\n                        isError: !this.state['password'].isValid,\n                        texts: { password: '' + text.inputs.password.placeholder, passwordValidator: '' + text.inputs.password.validator },\n                        name: 'password',\n                        onFocus: this.onFocus,\n                        onBlur: this.onBlur,\n                        handleChange: this.handleChange,\n                        value: this.state.password.value,\n                        focus: this.state.password.focus\n                    }, !isPasswordShown && { type: 'password' }, (0, _defineProperty3.default)({\n                        'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 350\n                        },\n                        __self: this\n                    }, '__self', this))),\n                    _react2.default.createElement('img', (_React$createElement6 = {\n                        onMouseDown: this.handlerShowPassword,\n                        src: '/src/apps/client/ui/components/AuthFormPopup/images/password.svg',\n                        alt: '',\n                        'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 361\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement6, '__self', this), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement6))\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement12 = { ref: this.phoneContainerRef, className: (0, _classnames2.default)(_RegistrationFormPopup2.default.phoneContainerField, (0, _defineProperty3.default)({}, _RegistrationFormPopup2.default.focusPhoneField, this.state.phone.focus)), 'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 367\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement12, '__self', this), (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement12, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement12),\n                    _react2.default.createElement(_FormInput2.default, (_React$createElement8 = {\n                        isError: !this.state['phone'].isValid,\n                        texts: { phone: '' + text.inputs.phone.placeholder, phoneValidator: '' + text.inputs.phone.validator },\n                        name: 'phone',\n                        onFocus: this.onFocus,\n                        onBlur: this.onBlur,\n                        handleChange: this.handleChange,\n                        value: this.state.phone.value,\n                        focus: this.state.phone.focus,\n                        'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 370\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement8, '__self', this), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement8)),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement11 = { className: _RegistrationFormPopup2.default.originBlock, 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 380\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement11, '__self', this), (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement11, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement11),\n                        _react2.default.createElement(_CountrySelector2.default, (_React$createElement9 = {\n                            activeCountry: activeCountry,\n                            setCountry: this.handleSetCountry,\n                            stateCountry: this.state.phone.value,\n                            'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 381\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement9, '__self', this), (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement9, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement9)),\n                        _react2.default.createElement(\n                            'div',\n                            (_React$createElement10 = { ref: this.callingCodeRef, className: _RegistrationFormPopup2.default.callingCode, 'data-qa-file': 'RegistrationFormPopup',\n                                __source: {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 386\n                                },\n                                __self: this\n                            }, (0, _defineProperty3.default)(_React$createElement10, '__self', this), (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement10, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement10),\n                            activeCountry.callingCode\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement19 = { className: _RegistrationFormPopup2.default.dateContainerField, 'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 389\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement19, '__self', this), (0, _defineProperty3.default)(_React$createElement19, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement19, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement19),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement13 = { className: (0, _classnames2.default)(_RegistrationFormPopup2.default.dateTitle, (_classNames3 = {}, (0, _defineProperty3.default)(_classNames3, _RegistrationFormPopup2.default.dateErrorTitle, !this.state['date'].isValid || !this.state['dateInputMaskValue'].isValid), (0, _defineProperty3.default)(_classNames3, _RegistrationFormPopup2.default.dateTitleActive, this.state['date'].focus || this.state['date'].value || this.state['dateInputMaskValue'].focus || this.state['dateInputMaskValue'].value), _classNames3)), 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 390\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement13, '__self', this), (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement13, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement13),\n                        '\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F'\n                    ),\n                    this.props.mediaWidth >= MOBILE_VERRSION && _react2.default.createElement(\n                        'div',\n                        (_React$createElement15 = { className: (0, _classnames2.default)(_RegistrationFormPopup2.default.datePickerContainer, (0, _defineProperty3.default)({}, _RegistrationFormPopup2.default.dateErrorField, !this.state['date'].isValid)), 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 399\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement15, '__self', this), (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement15, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement15),\n                        _react2.default.createElement(_reactDatepicker2.default, (_React$createElement14 = { dateFormat: 'dd.MM.yyyy',\n                            selected: this.state.date.value,\n                            onChange: function onChange(date) {\n                                return _this2.setStartDate(date);\n                            },\n                            onFocus: this.onFocus('date'),\n                            onBlur: function onBlur() {\n                                return _this2.onBlur('date');\n                            },\n                            maxDate: new Date(),\n                            showMonthDropdown: true,\n                            showYearDropdown: true,\n                            'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 402\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement14, '__self', this), (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement14, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement14))\n                    ),\n                    _react2.default.createElement(\n                        _reactInputMask2.default,\n                        (_React$createElement16 = {\n                            mask: '99.99.9999',\n                            value: this.state.dateInputMaskValue.value,\n                            onFocus: this.onFocus('dateInputMaskValue'),\n                            onChange: this.setMobileStartDate,\n                            onBlur: function onBlur() {\n                                return _this2.onBlur('dateInputMaskValue');\n                            },\n                            'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 412\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement16, '__self', this), (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement16, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement16),\n                        function (inputProps) {\n                            var _classNames5;\n\n                            return _react2.default.createElement('input', (0, _extends5.default)({}, inputProps, (0, _defineProperty3.default)({\n                                className: (0, _classnames2.default)(_RegistrationFormPopup2.default.mobileMaskDate, (_classNames5 = {}, (0, _defineProperty3.default)(_classNames5, _RegistrationFormPopup2.default.mobileMaskDateActive, _this2.state.dateInputMaskValue.focus), (0, _defineProperty3.default)(_classNames5, _RegistrationFormPopup2.default.dateTitleActive, _this2.state['dateInputMaskValue'].focus || _this2.state['dateInputMaskValue'].value), (0, _defineProperty3.default)(_classNames5, _RegistrationFormPopup2.default.dateErrorField, !_this2.state['dateInputMaskValue'].isValid), _classNames5)),\n                                type: 'text',\n                                name: 'dateMask',\n                                'data-qa-file': 'RegistrationFormPopup',\n                                __source: {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 419\n                                },\n                                __self: _this2\n                            }, '__self', _this2)));\n                        }\n                    ),\n                    _react2.default.createElement('img', (_React$createElement17 = { src: '/src/apps/client/ui/components/RegistrationFormPopup/images/date.svg', alt: '', 'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 430\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement17, '__self', this), (0, _defineProperty3.default)(_React$createElement17, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement17, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement17)),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement18 = { className: (0, _classnames2.default)(_RegistrationFormPopup2.default.dateBottomLabel, (0, _defineProperty3.default)({}, _RegistrationFormPopup2.default.dateBottomLabelActive, !this.state['date'].isValid || !this.state['dateInputMaskValue'].isValid)), 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 431\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement18, '__self', this), (0, _defineProperty3.default)(_React$createElement18, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement18, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement18),\n                        text.inputs.date.validator\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement24 = { className: _RegistrationFormPopup2.default.checkboxesContainer, 'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 435\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement24, '__self', this), (0, _defineProperty3.default)(_React$createElement24, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement24, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement24),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement22 = { onClick: this.handlerCheckBoxClick('confirm'), 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 436\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement22, '__self', this), (0, _defineProperty3.default)(_React$createElement22, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement22, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement22),\n                        _react2.default.createElement('img', (_React$createElement20 = { className: _RegistrationFormPopup2.default.emptyCheck, src: '/src/apps/client/ui/components/RegistrationFormPopup/images/empty.png', alt: '', 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 437\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement20, '__self', this), (0, _defineProperty3.default)(_React$createElement20, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement20, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement20)),\n                        _react2.default.createElement('img', (_React$createElement21 = { className: (0, _classnames2.default)(_RegistrationFormPopup2.default.fillCheck, (0, _defineProperty3.default)({}, _RegistrationFormPopup2.default.activeCheckbox, confirm.value)), src: '/src/apps/client/ui/components/RegistrationFormPopup/images/checked.png', alt: '', 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 438\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement21, '__self', this), (0, _defineProperty3.default)(_React$createElement21, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement21, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement21)),\n                        text.iAccept\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        (_React$createElement23 = { className: (0, _classnames2.default)(_RegistrationFormPopup2.default.checkboxError, (0, _defineProperty3.default)({}, _RegistrationFormPopup2.default.checkboxErrorActive, !this.state['confirm'].isValid)), 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 443\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement23, '__self', this), (0, _defineProperty3.default)(_React$createElement23, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement23, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement23),\n                        text.updates\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    (_React$createElement27 = { className: _RegistrationFormPopup2.default.buttonContainer, 'data-qa-file': 'RegistrationFormPopup',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 447\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement27, '__self', this), (0, _defineProperty3.default)(_React$createElement27, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement27, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement27),\n                    error && _react2.default.createElement(\n                        'div',\n                        (_React$createElement25 = { className: _RegistrationFormPopup2.default.errorMessage, 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 448\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement25, '__self', this), (0, _defineProperty3.default)(_React$createElement25, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement25, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement25),\n                        error\n                    ),\n                    _react2.default.createElement(\n                        'button',\n                        (_React$createElement26 = { className: (0, _classnames2.default)(_RegistrationFormPopup2.default.button), type: 'submit', 'data-qa-file': 'RegistrationFormPopup',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 449\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement26, '__self', this), (0, _defineProperty3.default)(_React$createElement26, 'data-qa-file', 'RegistrationFormPopup'), (0, _defineProperty3.default)(_React$createElement26, 'data-qa-file', 'RegistrationFormPopup'), _React$createElement26),\n                        text.signUp\n                    )\n                )\n            )];\n        }\n    }]);\n    return RegistrationFormPopup;\n}(_react.Component), _class.propTypes = {\n    langMap: _propTypes2.default.object.isRequired,\n    saveUser: _propTypes2.default.func.isRequired,\n    setAuthenticationPopup: _propTypes2.default.func.isRequired,\n    logIn: _propTypes2.default.func.isRequired,\n    checkAuthentication: _propTypes2.default.func.isRequired,\n    user: _propTypes2.default.object,\n    mediaWidth: _propTypes2.default.number.isRequired,\n    isVisible: _propTypes2.default.bool.isRequired\n}, _class.defaultProps = {\n    langMap: {},\n    user: {}\n}, _temp);\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(RegistrationFormPopup);",{"version":3,"sources":["src\\apps\\client\\ui\\components\\RegistrationFormPopup\\RegistrationFormPopup.jsx"],"names":["MOBILE_VERRSION","mapStateToProps","application","data","langMap","user","mediaWidth","media","width","mapDispatchToProps","dispatch","logIn","payload","saveUser","setAuthenticationPopup","checkAuthentication","RegistrationFormPopup","props","handleChange","name","value","e","stopPropagation","actualValue","target","length","state","maxLength","setState","focus","isValid","onFocus","onBlur","currentState","handleCheckErrors","names","thisState","forEach","property","text","undefined","date","dateInputMaskValue","includes","newValue","handleSubmit","preventDefault","surname","email","password","phone","confirm","activeCountry","Object","keys","key","Date","parse","country","credentials","trim","then","defaultState","closePopup","catch","error","message","handlerCheckBoxClick","type","handlerShowPassword","isPasswordShown","handleSetCountry","setInitialDate","dataArr","split","setStartDate","setMobileStartDate","map","i","replace","day","month","year","setFullYear","getDate","currentDate","handleIsMobileVersion","COUNTRY_INFO","phoneContainerRef","React","createRef","callingCodeRef","current","firstChild","style","paddingLeft","offsetWidth","prevProps","isVisible","styles","form","inputs","placeholder","nameValidator","validator","surnameValidator","emailContainerField","emailValidator","bottomLabel","bottomLabelActive","isLogin","passwordContainerField","passwordValidator","phoneContainerField","focusPhoneField","phoneValidator","originBlock","callingCode","dateContainerField","dateTitle","dateErrorTitle","dateTitleActive","datePickerContainer","dateErrorField","inputProps","mobileMaskDate","mobileMaskDateActive","dateBottomLabel","dateBottomLabelActive","checkboxesContainer","emptyCheck","fillCheck","activeCheckbox","iAccept","checkboxError","checkboxErrorActive","updates","buttonContainer","errorMessage","button","signUp","Component","propTypes","PropTypes","object","isRequired","func","number","bool","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA,IAAMA,kBAAkB,GAAxB;;AAEA,IAAMC,kBAAkB,SAAlBA,eAAkB,OAA2B;AAAA,QAAxBC,WAAwB,QAAxBA,WAAwB;AAAA,QAAXC,IAAW,QAAXA,IAAW;;AAC/C,WAAO;AACHC,iBAASF,YAAYE,OADlB;AAEHC,cAAMF,KAAKE,IAFR;AAGHC,oBAAYJ,YAAYK,KAAZ,CAAkBC;AAH3B,KAAP;AAKH,CAND;;AAQA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAACC,QAAD;AAAA,WAAe;AACtCC,eAAO;AAAA,mBAAWD,SAAS,qBAAME,OAAN,CAAT,CAAX;AAAA,SAD+B;AAEtCC,kBAAU;AAAA,mBAAgBH,SAASG,8CAAT,CAAhB;AAAA,SAF4B;AAGtCC,gCAAwB;AAAA,mBAAWJ,SAAS,sCAAuBE,OAAvB,CAAT,CAAX;AAAA,SAHc;AAItCG,6BAAqB;AAAA,mBAAWL,SAAS,mCAAoBE,OAApB,CAAT,CAAX;AAAA;AAJiB,KAAf;AAAA,CAA3B;;IAOMI,qB;;;AAiBF,mCAAaC,KAAb,EAAoB;AAAA;;AAAA,gKACVA,KADU;;AAAA,cAiDpBC,YAjDoB,GAiDL,UAACC,IAAD,EAAOC,KAAP;AAAA,mBAAiB,aAAK;AACjCC,kBAAEC,eAAF;AACA,oBAAMC,cAAc,yBAAYH,KAAZ,IAAqBC,EAAEG,MAAF,CAASJ,KAA9B,GAAsCA,KAA1D;;AAEA,oBAAIG,YAAYE,MAAZ,GAAqB,MAAKC,KAAL,CAAWC,SAApC,EAA+C;;AAE/C,sBAAKC,QAAL,mCACKT,IADL,6BACiB,MAAKO,KAAL,CAAWP,IAAX,CADjB,IACmCC,OAAOG,WAD1C,EACuDM,OAAO,yBAAYT,KAAZ,CAD9D,EACkFU,SAAS,IAD3F;AAGH,aATc;AAAA,SAjDK;;AAAA,cA4DpBC,OA5DoB,GA4DV;AAAA,mBAAQ,aAAK;AACnBV,kBAAEC,eAAF;AACA,sBAAKM,QAAL,mCACKT,IADL,6BACiB,MAAKO,KAAL,CAAWP,IAAX,CADjB,IACmCU,OAAO,CAAC,MAAKH,KAAL,CAAWP,IAAX,EAAiBU,KAD5D;AAGH,aALS;AAAA,SA5DU;;AAAA,cAmEpBG,MAnEoB,GAmEX,gBAAQ;AACb,gBAAMC,eAAe,MAAKC,iBAAL,CAAuB,CAACf,IAAD,CAAvB,CAArB;;AAEA,kBAAKS,QAAL,mCACKT,IADL,6BACiB,MAAKO,KAAL,CAAWP,IAAX,CADjB,IACmCU,OAAO,KAD1C,EACiDC,SAASG,aAAad,IAAb,EAAmBW,OAD7E;AAGH,SAzEmB;;AAAA,cA2EpBI,iBA3EoB,GA2EA,YAAgB;AAAA,gBAAfC,KAAe,uEAAP,EAAO;;AAChC,gBAAMC,YAAY,EAAlB;;AAEAD,kBAAME,OAAN,CAAc,gBAAQ;AAClB,oBAAMC,WAAW,MAAKZ,KAAL,CAAWP,IAAX,CAAjB;;AAEA,oBAAI,sBAASmB,QAAT,KAAsB,CAAC,qBAAQA,QAAR,CAA3B,EAA8C;AAC1C,wBAAMlB,QAAQ,MAAKM,KAAL,CAAWP,IAAX,EAAiBC,KAA/B;AACA,wBAAIU,UAAU,CACVX,SAAS,OAAT,GAAmB,qBAAMC,KAAN,EAAa,EAAEmB,MAAM,KAAR,EAAb,CAAnB,GACMpB,SAAS,OAAT,GAAmB,qBAAMC,KAAN,EAAa,EAAEmB,MAAM,KAAR,EAAb,CAAnB,GACI,wBAASnB,KAAT,EAAgB,EAAEmB,MAAM,KAAR,EAAhB,CAHA,MAGsCC,SAHpD;;AAKA,wBAAIrB,SAAS,MAAT,IAAmB,CAAC,MAAKO,KAAL,CAAWe,IAAX,CAAgBrB,KAAxC,EAA+C;AAC3CU,kCAAU,KAAV;AACH;;AAED,wBAAIX,SAAS,UAAT,IAAuB,CAAC,CAAC,MAAKO,KAAL,CAAWP,IAAX,EAAiBC,KAAjB,CAAuBK,MAAhD,IAA0D,MAAKC,KAAL,CAAWP,IAAX,EAAiBC,KAAjB,CAAuBK,MAAvB,GAAgC,CAA9F,EAAiG;AAC7FK,kCAAU,KAAV;AACH;;AAED,wBACIX,SAAS,oBAAT,IAAiC,MAAKF,KAAL,CAAWX,UAAX,GAAwBN,eAAzD,IAA4E,MAAK0B,KAAL,CAAWgB,kBAAX,CAA8BtB,KAA9B,CAAoCuB,QAApC,CAA6C,GAA7C,CAA5E,IACAxB,SAAS,oBAAT,IAAiC,CAAC,MAAKO,KAAL,CAAWgB,kBAAX,CAA8BtB,KAFpE,EAGE;AACEU,kCAAU,KAAV;AACH;;AAED,wBAAMc,sCAAgBN,QAAhB,IAA0BR,gBAA1B,GAAN;AACAM,8BAAUjB,IAAV,IAAkByB,QAAlB;;AAEA,0BAAKhB,QAAL,mCACKT,IADL,EACYyB,QADZ;AAGH;AACJ,aAhCD;;AAkCA,mBAAOR,SAAP;AACH,SAjHmB;;AAAA,cAmHpBS,YAnHoB,GAmHL,aAAK;AAChBxB,cAAEyB,cAAF;;AADgB,8BAGgE,MAAKpB,KAHrE;AAAA,gBAGRP,IAHQ,eAGRA,IAHQ;AAAA,gBAGF4B,OAHE,eAGFA,OAHE;AAAA,gBAGOC,KAHP,eAGOA,KAHP;AAAA,gBAGcC,QAHd,eAGcA,QAHd;AAAA,gBAGwBC,KAHxB,eAGwBA,KAHxB;AAAA,gBAG+BT,IAH/B,eAG+BA,IAH/B;AAAA,gBAGqCU,OAHrC,eAGqCA,OAHrC;AAAA,gBAG8CC,aAH9C,eAG8CA,aAH9C;;;AAKhB,gBAAMhB,YAAY,MAAKF,iBAAL,CAAuBmB,OAAOC,IAAP,CAAY;AACjDnC,0BADiD;AAEjD4B,gCAFiD;AAGjDC,4BAHiD;AAIjDC,kCAJiD;AAKjDC,4BALiD;AAMjDT,0BANiD;AAOjDU;AAPiD,aAAZ,CAAvB,CAAlB;AASA,gBAAIrB,UAAU,IAAd;;AAEA,iBAAK,IAAIyB,GAAT,IAAgBnB,SAAhB,EAA2B;AACvB,oBAAI,CAAC,sBAAO,CAAC,SAAD,CAAP,EAAoB,IAApB,EAA0BA,UAAUmB,GAAV,CAA1B,CAAL,EAAgD;AAC5CzB,8BAAU,KAAV;AACH;AACJ;;AAED,gBAAIA,OAAJ,EAAa;AACT,oBAAMzB,OAAO;AACTc,0BAAMA,KAAKC,KADF;AAET2B,6BAASA,QAAQ3B,KAFR;AAGT4B,2BAAOA,MAAM5B,KAHJ;AAIT6B,8BAAUA,SAAS7B,KAJV;AAKT8B,2BAAOA,MAAM9B,KALJ;AAMTqB,0BAAM,MAAKxB,KAAL,CAAWX,UAAX,GAAwBN,eAAxB,GAA0CyC,KAAKrB,KAA/C,GAAuDoC,KAAKC,KAAL,CAAWhB,KAAKrB,KAAhB,CANpD;AAOTsC,6BAASN,cAAcjC;AAPd,iBAAb;;AAUA,oBAAMwC,cAAc;AAChBX,2BAAOA,MAAM5B,KAAN,CAAYwC,IAAZ,EADS;AAEhBX,8BAAUA,SAAS7B,KAAT,CAAewC,IAAf;AAFM,iBAApB;;AAKA,sBAAK3C,KAAL,CAAWJ,QAAX,CAAoBR,IAApB,EACKwD,IADL,CACU,YAAM;AACR,0BAAKjC,QAAL,4BACO,MAAKkC,YAAL,EADP,GAEG;AAAA,+BAAM,MAAK7C,KAAL,CAAWN,KAAX,CAAiBgD,WAAjB,EACJE,IADI,CACC,YAAM;AACR,kCAAK5C,KAAL,CAAWF,mBAAX;AACH,yBAHI,CAAN;AAAA,qBAFH;AAMA,0BAAKgD,UAAL;AACH,iBATL,EAUKC,KAVL,CAUW;AAAA,2BAAK,MAAKpC,QAAL,CAAc,EAAEqC,OAAO5C,EAAE6C,OAAX,EAAd,CAAL;AAAA,iBAVX;AAWH;AACJ,SArKmB;;AAAA,cAuKpBH,UAvKoB,GAuKP,YAAM;AACf,kBAAK9C,KAAL,CAAWH,sBAAX,CAAkC,KAAlC;AACH,SAzKmB;;AAAA,cA2KpBqD,oBA3KoB,GA2KG;AAAA,mBAAQ,YAAM;AACjC,sBAAKvC,QAAL,mCACKwC,IADL,6BACiB,MAAK1C,KAAL,CAAW0C,IAAX,CADjB,IACmChD,OAAO,CAAC,MAAKM,KAAL,CAAW0C,IAAX,EAAiBhD,KAD5D;AAGH,aAJsB;AAAA,SA3KH;;AAAA,cAiLpBiD,mBAjLoB,GAiLE,YAAM;AACxB,kBAAKzC,QAAL,CAAc,EAAE0C,iBAAiB,CAAC,MAAK5C,KAAL,CAAW4C,eAA/B,EAAd;AACH,SAnLmB;;AAAA,cAqLpBC,gBArLoB,GAqLD,mBAAW;AAC1B,kBAAK3C,QAAL,CAAc,EAAEwB,eAAeM,OAAjB,EAA0BR,kCAAY,MAAKxB,KAAL,CAAWwB,KAAvB,IAA8B9B,OAAO,MAAKM,KAAL,CAAWwB,KAAX,CAAiB9B,KAAtD,GAA1B,EAAd;AACH,SAvLmB;;AAAA,cAyLpBoD,cAzLoB,GAyLH,YAAM;AACnB,gBAAMC,UAAU,MAAK/C,KAAL,CAAWe,IAAX,CAAgBrB,KAAhB,CAAsBsD,KAAtB,CAA4B,GAA5B,CAAhB;AACA,mBAAO,MAAKhD,KAAL,CAAWe,IAAX,CAAgBrB,KAAhB,GAAwB,IAAIoC,IAAJ,CAASiB,QAAQ,CAAR,CAAT,EAAqBA,QAAQ,CAAR,CAArB,EAAiCA,QAAQ,CAAR,CAAjC,CAAxB,GAAuE,IAAIjB,IAAJ,EAA9E;AACH,SA5LmB;;AAAA,cA8LpBmB,YA9LoB,GA8LL,gBAAQ;AACnB,gBAAI,MAAK1D,KAAL,CAAWX,UAAX,IAAyBN,eAA7B,EAA8C;AAC1C,sBAAK4B,QAAL,CAAc;AACVa,qDAAW,MAAKf,KAAL,CAAWe,IAAtB,IAA4BrB,OAAOqB,IAAnC,EAAyCX,SAAS,CAAC,CAACW,IAApD;AADU,iBAAd;AAGA;AACH;AACD,kBAAKb,QAAL,CAAc;AACVa,iDAAW,MAAKf,KAAL,CAAWe,IAAtB,IAA4BrB,OAAOoC,KAAKC,KAAL,CAAWhB,IAAX,CAAnC;AADU,aAAd;AAGH,SAxMmB;;AAAA,cA0MpBmC,kBA1MoB,GA0MC,aAAK;AAAA,wCACKvD,EAAEG,MAAF,CAASJ,KAAT,CAAesD,KAAf,CAAqB,GAArB,EAA0BG,GAA1B,CAA8B;AAAA,uBAAKC,EAAEC,OAAF,CAAU,IAAV,EAAgB,EAAhB,CAAL;AAAA,aAA9B,CADL;AAAA;AAAA,gBACfC,GADe;AAAA,gBACVC,KADU;AAAA,gBACHC,IADG;;AAEtB,kBAAKtD,QAAL,CAAc;AACVa,iDAAW,MAAKf,KAAL,CAAWe,IAAtB,IAA4BrB,OAAO,IAAIoC,IAAJ,GAAW2B,WAAX,CAAuBD,IAAvB,EAA6BD,QAAQ,CAArC,EAAwCD,GAAxC,CAAnC,GADU;AAEVtC,+DAAyB,MAAKhB,KAAL,CAAWgB,kBAApC,IAAwDtB,OAAOC,EAAEG,MAAF,CAASJ,KAAxE;AAFU,aAAd;AAIH,SAhNmB;;AAAA,cAkNpBgE,OAlNoB,GAkNV,uBAAe;AACrB,gBAAI,CAACC,WAAL,EAAkB;AACd;AACH;;AAED,gBAAM5C,OAAO,IAAIe,IAAJ,CAAS6B,WAAT,CAAb;;AAEA,mBAAO,sBAAO5C,IAAP,EAAa,YAAb,CAAP;AACH,SA1NmB;;AAAA,cA4NpB6C,qBA5NoB,GA4NI,YAAM;AAAA,+BACW,MAAK5D,KADhB;AAAA,gBAClBgB,kBADkB,gBAClBA,kBADkB;AAAA,gBACED,IADF,gBACEA,IADF;;;AAG1B,gBAAI,MAAKxB,KAAL,CAAWX,UAAX,IAAyBN,eAAzB,IAA4C0C,mBAAmBtB,KAAnE,EAA0E;AACtE,sBAAKQ,QAAL,CAAc;AACVa,qDAAWA,IAAX,IAAiBrB,OAAOqB,KAAKrB,KAA7B,GADU;AAEVsB,mEAAyBA,kBAAzB,IAA6CtB,OAAO,EAApD;AAFU,iBAAd;AAIH;;AAED,gBAAI,MAAKH,KAAL,CAAWX,UAAX,GAAwBN,eAAxB,IAA2C,CAAC0C,mBAAmBtB,KAAnE,EAA0E;AACtE,sBAAKQ,QAAL,CAAc;AACVa,qDAAWA,IAAX,IAAiBrB,OAAOqB,KAAKrB,KAA7B,GADU;AAEVsB,mEAAyBA,kBAAzB,IAA6CtB,OAAO,MAAKgE,OAAL,CAAa3C,KAAKrB,KAAlB,KAA4B,YAAhF;AAFU,iBAAd;AAIH;AACJ,SA5OmB;;AAEhB,cAAKM,KAAL,8BACO,MAAKoC,YAAL,EADP;AAEIQ,6BAAiB,KAFrB;AAGIL,mBAAO,IAHX;AAIIb,2BAAe,MAAKnC,KAAL,CAAWZ,IAAX,GAAkB,MAAKY,KAAL,CAAWZ,IAAX,CAAgBqD,OAAlC,GAA4C6B,wBAAa,CAAb;AAJ/D;AAMA,cAAKC,iBAAL,GAAyBC,gBAAMC,SAAN,EAAzB;AACA,cAAKC,cAAL,GAAsBF,gBAAMC,SAAN,EAAtB;AATgB;AAUnB;;;;uCAEe;AACZ,mBAAO;AACHvE,sBAAM,EAAEC,OAAO,EAAT,EAAaS,OAAO,KAApB,EAA2BC,SAAS,IAApC,EADH;AAEHiB,yBAAS,EAAE3B,OAAO,EAAT,EAAaS,OAAO,KAApB,EAA2BC,SAAS,IAApC,EAFN;AAGHkB,uBAAO,EAAE5B,OAAO,EAAT,EAAaS,OAAO,KAApB,EAA2BC,SAAS,IAApC,EAHJ;AAIHmB,0BAAU,EAAE7B,OAAO,EAAT,EAAaS,OAAO,KAApB,EAA2BC,SAAS,IAApC,EAJP;AAKHoB,uBAAO,EAAE9B,OAAO,EAAT,EAAaS,OAAO,KAApB,EAA2BC,SAAS,IAApC,EALJ;AAMHW,sBAAM,EAAErB,OAAO,IAAT,EAAeS,OAAO,KAAtB,EAA6BC,SAAS,IAAtC,EANH;AAOHqB,yBAAS,EAAE/B,OAAO,KAAT,EAAgBS,OAAO,KAAvB,EAA8BC,SAAS,IAAvC,EAPN;AAQHY,oCAAoB,EAAEtB,OAAO,EAAT,EAAaS,OAAO,KAApB,EAA2BC,SAAS,IAApC;AARjB,aAAP;AAUH;;;4CAEoB;AACjB,iBAAKwD,qBAAL;AACA,iBAAKE,iBAAL,CAAuBI,OAAvB,CAA+BC,UAA/B,CAA0CA,UAA1C,CAAqDC,KAArD,CAA2DC,WAA3D,GAAyE,KAAKJ,cAAL,CAAoBC,OAApB,CAA4BI,WAA5B,GAA0C,EAA1C,GAA+C,IAAxH;AACH;;;2CAEmBC,S,EAAW;AAC3B,gBAAIA,UAAU5F,IAAV,KAAmB,KAAKY,KAAL,CAAWZ,IAA9B,IAAsC4F,UAAU5F,IAApD,EAA0D;AACtD,qBAAKuB,QAAL,4BACO,KAAKkC,YAAL,EADP;AAEIV,mCAAemC,wBAAa,CAAb,CAFnB;AAGItB,2BAAO;AAHX;AAKH;;AAED,gBAAIgC,UAAUC,SAAV,KAAwB,KAAKjF,KAAL,CAAWiF,SAAnC,IAAgD,CAAC,KAAKjF,KAAL,CAAWiF,SAAhE,EAA2E;AACvE,qBAAKtE,QAAL,4BACO,KAAKkC,YAAL,EADP;AAGH;;AAED,iBAAKwB,qBAAL;AACA,iBAAKE,iBAAL,CAAuBI,OAAvB,CAA+BC,UAA/B,CAA0CA,UAA1C,CAAqDC,KAArD,CAA2DC,WAA3D,GAAyE,KAAKJ,cAAL,CAAoBC,OAApB,CAA4BI,WAA5B,GAA0C,EAA1C,GAA+C,IAAxH;AACH;;;iCA+LS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,gBACE5F,OADF,GACc,KAAKa,KADnB,CACEb,OADF;AAAA,yBAEqD,KAAKsB,KAF1D;AAAA,gBAEEyB,OAFF,UAEEA,OAFF;AAAA,gBAEWmB,eAFX,UAEWA,eAFX;AAAA,gBAE4BL,KAF5B,UAE4BA,KAF5B;AAAA,gBAEmCb,aAFnC,UAEmCA,aAFnC;;AAGN,gBAAMb,OAAO,sBAAO,MAAP,EAAe,EAAf,EAAmBnC,OAAnB,CAAb;;AAEA,mBACI,CACI;AAAA;AAAA,4CAAM,KAAK,CAAX,EAAc,WAAW+F,gCAAOC,IAAhC,EAAsC,UAAU,KAAKvD,YAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,8CAAC,mBAAD;AACI,6BAAS,CAAC,KAAKnB,KAAL,CAAW,MAAX,EAAmBI,OADjC;AAEI,2BAAO,EAAEX,WAASoB,KAAK8D,MAAL,CAAYlF,IAAZ,CAAiBmF,WAA5B,EAA2CC,oBAAkBhE,KAAK8D,MAAL,CAAYlF,IAAZ,CAAiBqF,SAA9E,EAFX;AAGI,0BAAK,MAHT;AAII,6BAAS,KAAKzE,OAJlB;AAKI,4BAAQ,KAAKC,MALjB;AAMI,kCAAc,KAAKd,YANvB;AAOI,2BAAO,KAAKQ,KAAL,CAAWP,IAAX,CAAgBC,KAP3B;AAQI,2BAAO,KAAKM,KAAL,CAAWP,IAAX,CAAgBU,KAR3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0SADJ;AAWI,8CAAC,mBAAD;AACI,6BAAS,CAAC,KAAKH,KAAL,CAAW,SAAX,EAAsBI,OADpC;AAEI,2BAAO,EAAEiB,cAAYR,KAAK8D,MAAL,CAAYtD,OAAZ,CAAoBuD,WAAlC,EAAiDG,uBAAqBlE,KAAK8D,MAAL,CAAYtD,OAAZ,CAAoByD,SAA1F,EAFX;AAGI,0BAAK,SAHT;AAII,6BAAS,KAAKzE,OAJlB;AAKI,4BAAQ,KAAKC,MALjB;AAMI,kCAAc,KAAKd,YANvB;AAOI,2BAAO,KAAKQ,KAAL,CAAWqB,OAAX,CAAmB3B,KAP9B;AAQI,2BAAO,KAAKM,KAAL,CAAWqB,OAAX,CAAmBlB,KAR9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8SAXJ;AAqBI;AAAA;AAAA,+CAAK,WAAWsE,gCAAOO,mBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,kDAAC,mBAAD;AACI,iCAAS,CAAC,KAAKhF,KAAL,CAAW,OAAX,EAAoBI,OADlC;AAEI,+BAAO,EAAEkB,YAAUT,KAAK8D,MAAL,CAAYrD,KAAZ,CAAkBsD,WAA9B,EAA6CK,qBAAmBpE,KAAK8D,MAAL,CAAYrD,KAAZ,CAAkBwD,SAAlF,EAFX;AAGI,8BAAK,OAHT;AAII,iCAAS,KAAKzE,OAJlB;AAKI,gCAAQ,KAAKC,MALjB;AAMI,sCAAc,KAAKd,YANvB;AAOI,+BAAO,KAAKQ,KAAL,CAAWsB,KAAX,CAAiB5B,KAP5B;AAQI,+BAAO,KAAKM,KAAL,CAAWsB,KAAX,CAAiBnB,KAR5B;AASI,qCAAa,IATjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kTADJ;AAYI;AAAA;AAAA,mDAAK,WAAW,0BAAWsE,gCAAOS,WAAlB,oCACXT,gCAAOU,iBADI,EACgB,KAAKnF,KAAL,CAAW,OAAX,EAAoBI,OADpC,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEKS,6BAAKuE;AAFV;AAZJ,iBArBJ;AAqCI;AAAA;AAAA,+CAAK,WAAWX,gCAAOY,sBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,kDAAC,mBAAD;AACI,iCAAS,CAAC,KAAKrF,KAAL,CAAW,UAAX,EAAuBI,OADrC;AAEI,+BAAO,EAAEmB,eAAaV,KAAK8D,MAAL,CAAYpD,QAAZ,CAAqBqD,WAApC,EAAmDU,wBAAsBzE,KAAK8D,MAAL,CAAYpD,QAAZ,CAAqBuD,SAA9F,EAFX;AAGI,8BAAK,UAHT;AAII,iCAAS,KAAKzE,OAJlB;AAKI,gCAAQ,KAAKC,MALjB;AAMI,sCAAc,KAAKd,YANvB;AAOI,+BAAO,KAAKQ,KAAL,CAAWuB,QAAX,CAAoB7B,KAP/B;AAQI,+BAAO,KAAKM,KAAL,CAAWuB,QAAX,CAAoBpB;AAR/B,uBASQ,CAACyC,eAAD,IAAoB,EAAEF,MAAM,UAAR,EAT5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ;AAYI;AACI,qCAAa,KAAKC,mBADtB;AAEI,6BAAI,kEAFR;AAGI,6BAAI,EAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAZJ,iBArCJ;AAuDI;AAAA;AAAA,gDAAK,KAAK,KAAKmB,iBAAf,EAAkC,WAAW,0BAAWW,gCAAOc,mBAAlB,oCACxCd,gCAAOe,eADiC,EACf,KAAKxF,KAAL,CAAWwB,KAAX,CAAiBrB,KADF,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGI,kDAAC,mBAAD;AACI,iCAAS,CAAC,KAAKH,KAAL,CAAW,OAAX,EAAoBI,OADlC;AAEI,+BAAO,EAAEoB,YAAUX,KAAK8D,MAAL,CAAYnD,KAAZ,CAAkBoD,WAA9B,EAA6Ca,qBAAmB5E,KAAK8D,MAAL,CAAYnD,KAAZ,CAAkBsD,SAAlF,EAFX;AAGI,8BAAK,OAHT;AAII,iCAAS,KAAKzE,OAJlB;AAKI,gCAAQ,KAAKC,MALjB;AAMI,sCAAc,KAAKd,YANvB;AAOI,+BAAO,KAAKQ,KAAL,CAAWwB,KAAX,CAAiB9B,KAP5B;AAQI,+BAAO,KAAKM,KAAL,CAAWwB,KAAX,CAAiBrB,KAR5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kTAHJ;AAaI;AAAA;AAAA,oDAAK,WAAWsE,gCAAOiB,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,sDAAC,yBAAD;AACI,2CAAehE,aADnB;AAEI,wCAAY,KAAKmB,gBAFrB;AAGI,0CAAc,KAAK7C,KAAL,CAAWwB,KAAX,CAAiB9B,KAHnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sTADJ;AAMI;AAAA;AAAA,wDAAK,KAAK,KAAKuE,cAAf,EAA+B,WAAWQ,gCAAOkB,WAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+DjE,0CAAciE;AAA7E;AANJ;AAbJ,iBAvDJ;AA6EI;AAAA;AAAA,gDAAK,WAAWlB,gCAAOmB,kBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;AAAA;AAAA,oDAAK,WAAW,0BAAWnB,gCAAOoB,SAAlB,kEACXpB,gCAAOqB,cADI,EACa,CAAC,KAAK9F,KAAL,CAAW,MAAX,EAAmBI,OAApB,IAA+B,CAAC,KAAKJ,KAAL,CAAW,oBAAX,EAAiCI,OAD9E,+CAEXqE,gCAAOsB,eAFI,EAEc,KAAK/F,KAAL,CAAW,MAAX,EAAmBG,KAAnB,IACtB,KAAKH,KAAL,CAAW,MAAX,EAAmBN,KADG,IAEtB,KAAKM,KAAL,CAAW,oBAAX,EAAiCG,KAFX,IAGtB,KAAKH,KAAL,CAAW,oBAAX,EAAiCN,KALzB,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ;AAUK,yBAAKH,KAAL,CAAWX,UAAX,IAAyBN,eAAzB,IAA4C;AAAA;AAAA,oDAAK,WAAW,0BAAWmG,gCAAOuB,mBAAlB,oCACxDvB,gCAAOwB,cADiD,EAChC,CAAC,KAAKjG,KAAL,CAAW,MAAX,EAAmBI,OADY,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGzC,sDAAC,yBAAD,8BAAY,YAAW,YAAvB;AACI,sCAAU,KAAKJ,KAAL,CAAWe,IAAX,CAAgBrB,KAD9B;AAEI,sCAAU;AAAA,uCAAQ,OAAKuD,YAAL,CAAkBlC,IAAlB,CAAR;AAAA,6BAFd;AAGI,qCAAS,KAAKV,OAAL,CAAa,MAAb,CAHb;AAII,oCAAQ;AAAA,uCAAM,OAAKC,MAAL,CAAY,MAAZ,CAAN;AAAA,6BAJZ;AAKI,qCAAS,IAAIwB,IAAJ,EALb;AAMI,mDANJ;AAOI,kDAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHyC,qBAVjD;AAuBI;AAAC,gDAAD;AAAA;AACI,kCAAK,YADT;AAEI,mCAAO,KAAK9B,KAAL,CAAWgB,kBAAX,CAA8BtB,KAFzC;AAGI,qCAAS,KAAKW,OAAL,CAAa,oBAAb,CAHb;AAII,sCAAU,KAAK6C,kBAJnB;AAKI,oCAAQ;AAAA,uCAAM,OAAK5C,MAAL,CAAY,oBAAZ,CAAN;AAAA,6BALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOK;AAAA;;AAAA,mCAAc,kEACP4F,UADO;AAEX,2CAAW,0BAAWzB,gCAAO0B,cAAlB,kEACN1B,gCAAO2B,oBADD,EACwB,OAAKpG,KAAL,CAAWgB,kBAAX,CAA8Bb,KADtD,+CAENsE,gCAAOsB,eAFD,EAEmB,OAAK/F,KAAL,CAAW,oBAAX,EAAiCG,KAAjC,IAA0C,OAAKH,KAAL,CAAW,oBAAX,EAAiCN,KAF9F,+CAGN+E,gCAAOwB,cAHD,EAGkB,CAAC,OAAKjG,KAAL,CAAW,oBAAX,EAAiCI,OAHpD,iBAFA;AAOX,sCAAK,MAPM;AAQX,sCAAK,UARM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAAd;AAAA;AAPL,qBAvBJ;AAyCI,qFAAK,KAAI,sEAAT,EAAgF,KAAI,EAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sTAzCJ;AA0CI;AAAA;AAAA,oDAAK,WAAW,0BAAWqE,gCAAO4B,eAAlB,oCACX5B,gCAAO6B,qBADI,EACoB,CAAC,KAAKtG,KAAL,CAAW,MAAX,EAAmBI,OAApB,IAA+B,CAAC,KAAKJ,KAAL,CAAW,oBAAX,EAAiCI,OADrF,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEKS,6BAAK8D,MAAL,CAAY5D,IAAZ,CAAiB+D;AAFtB;AA1CJ,iBA7EJ;AA2HI;AAAA;AAAA,gDAAK,WAAWL,gCAAO8B,mBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;AAAA;AAAA,oDAAK,SAAS,KAAK9D,oBAAL,CAA0B,SAA1B,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,yFAAK,WAAWgC,gCAAO+B,UAAvB,EAAmC,KAAI,uEAAvC,EAA+G,KAAI,EAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0TADJ;AAEI,yFAAK,WAAW,0BAAW/B,gCAAOgC,SAAlB,oCACXhC,gCAAOiC,cADI,EACajF,QAAQ/B,KADrB,EAAhB,EAEI,KAAI,yEAFR,EAEkF,KAAI,EAFtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0TAFJ;AAKKmB,6BAAK8F;AALV,qBADJ;AAQI;AAAA;AAAA,oDAAK,WAAW,0BAAWlC,gCAAOmC,aAAlB,oCACXnC,gCAAOoC,mBADI,EACkB,CAAC,KAAK7G,KAAL,CAAW,SAAX,EAAsBI,OADzC,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEKS,6BAAKiG;AAFV;AARJ,iBA3HJ;AAuII;AAAA;AAAA,gDAAK,WAAWrC,gCAAOsC,eAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACKxE,6BAAS;AAAA;AAAA,oDAAK,WAAWkC,gCAAOuC,YAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsCzE;AAAtC,qBADd;AAEI;AAAA;AAAA,oDAAQ,WAAW,0BAAWkC,gCAAOwC,MAAlB,CAAnB,EAA8C,MAAK,QAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6DpG,6BAAKqG;AAAlE;AAFJ;AAvIJ,aADJ,CADJ;AAgJH;;;EApZ+BC,gB,UACzBC,S,GAAY;AACf1I,aAAS2I,oBAAUC,MAAV,CAAiBC,UADX;AAEfpI,cAAUkI,oBAAUG,IAAV,CAAeD,UAFV;AAGfnI,4BAAwBiI,oBAAUG,IAAV,CAAeD,UAHxB;AAIftI,WAAOoI,oBAAUG,IAAV,CAAeD,UAJP;AAKflI,yBAAqBgI,oBAAUG,IAAV,CAAeD,UALrB;AAMf5I,UAAM0I,oBAAUC,MAND;AAOf1I,gBAAYyI,oBAAUI,MAAV,CAAiBF,UAPd;AAQf/C,eAAW6C,oBAAUK,IAAV,CAAeH;AARX,C,SAWZI,Y,GAAe;AAClBjJ,aAAS,EADS;AAElBC,UAAM;AAFY,C;kBA2YX,yBAAQJ,eAAR,EAAyBQ,kBAAzB,EAA6CO,qBAA7C,C","file":"RegistrationFormPopup.jsx","sourceRoot":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport DatePicker from 'react-datepicker';\nimport InputMask from 'react-input-mask';\nimport format from 'date-fns/format';\n\nimport classNames from 'classnames';\n\nimport isUndefined from '@tinkoff/utils/is/undefined';\nimport isObject from '@tinkoff/utils/is/object';\nimport isArray from '@tinkoff/utils/is/array';\nimport propOr from '@tinkoff/utils/object/propOr';\nimport pathOr from '@tinkoff/utils/object/pathOr';\n\nimport required from '../Form/validators/required';\nimport email from '../Form/validators/email';\nimport phone from '../Form/validators/phone';\n\nimport FormInput from '../FormInput/FormInput';\n\nimport styles from './RegistrationFormPopup.css';\n\nimport saveUser from '../../../services/client/saveUser';\nimport logIn from '../../../services/client/logIn';\n\nimport setAuthenticationPopup from '../../../actions/setAuthenticationPopup';\nimport checkAuthentication from '../../../services/client/checkAuthentication';\n\nimport CountrySelector from '../CountrySelector/CountrySelector';\nimport { COUNTRY_INFO } from '../../../constants/constants';\n\nconst MOBILE_VERRSION = 920;\n\nconst mapStateToProps = ({ application, data }) => {\n    return {\n        langMap: application.langMap,\n        user: data.user,\n        mediaWidth: application.media.width\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    logIn: payload => dispatch(logIn(payload)),\n    saveUser: (...payload) => dispatch(saveUser(...payload)),\n    setAuthenticationPopup: payload => dispatch(setAuthenticationPopup(payload)),\n    checkAuthentication: payload => dispatch(checkAuthentication(payload))\n});\n\nclass RegistrationFormPopup extends Component {\n    static propTypes = {\n        langMap: PropTypes.object.isRequired,\n        saveUser: PropTypes.func.isRequired,\n        setAuthenticationPopup: PropTypes.func.isRequired,\n        logIn: PropTypes.func.isRequired,\n        checkAuthentication: PropTypes.func.isRequired,\n        user: PropTypes.object,\n        mediaWidth: PropTypes.number.isRequired,\n        isVisible: PropTypes.bool.isRequired\n    };\n\n    static defaultProps = {\n        langMap: {},\n        user: {}\n    };\n\n    constructor (props) {\n        super(props);\n        this.state = {\n            ...this.defaultState(),\n            isPasswordShown: false,\n            error: null,\n            activeCountry: this.props.user ? this.props.user.country : COUNTRY_INFO[0]\n        };\n        this.phoneContainerRef = React.createRef();\n        this.callingCodeRef = React.createRef();\n    }\n\n    defaultState () {\n        return {\n            name: { value: '', focus: false, isValid: true },\n            surname: { value: '', focus: false, isValid: true },\n            email: { value: '', focus: false, isValid: true },\n            password: { value: '', focus: false, isValid: true },\n            phone: { value: '', focus: false, isValid: true },\n            date: { value: null, focus: false, isValid: true },\n            confirm: { value: false, focus: false, isValid: true },\n            dateInputMaskValue: { value: '', focus: false, isValid: true }\n        };\n    };\n\n    componentDidMount () {\n        this.handleIsMobileVersion();\n        this.phoneContainerRef.current.firstChild.firstChild.style.paddingLeft = this.callingCodeRef.current.offsetWidth + 61 + 'px';\n    }\n\n    componentDidUpdate (prevProps) {\n        if (prevProps.user !== this.props.user && prevProps.user) {\n            this.setState({\n                ...this.defaultState(),\n                activeCountry: COUNTRY_INFO[0],\n                error: false\n            });\n        }\n\n        if (prevProps.isVisible !== this.props.isVisible && !this.props.isVisible) {\n            this.setState({\n                ...this.defaultState()\n            });\n        }\n\n        this.handleIsMobileVersion();\n        this.phoneContainerRef.current.firstChild.firstChild.style.paddingLeft = this.callingCodeRef.current.offsetWidth + 61 + 'px';\n    }\n\n    handleChange = (name, value) => e => {\n        e.stopPropagation();\n        const actualValue = isUndefined(value) ? e.target.value : value;\n\n        if (actualValue.length > this.state.maxLength) return;\n\n        this.setState({\n            [name]: { ...this.state[name], value: actualValue, focus: isUndefined(value), isValid: true }\n        });\n    };\n\n    onFocus = name => e => {\n        e.stopPropagation();\n        this.setState({\n            [name]: { ...this.state[name], focus: !this.state[name].focus }\n        });\n    };\n\n    onBlur = name => {\n        const currentState = this.handleCheckErrors([name]);\n\n        this.setState({\n            [name]: { ...this.state[name], focus: false, isValid: currentState[name].isValid }\n        });\n    };\n\n    handleCheckErrors = (names = []) => {\n        const thisState = {};\n\n        names.forEach(name => {\n            const property = this.state[name];\n\n            if (isObject(property) && !isArray(property)) {\n                const value = this.state[name].value;\n                let isValid = (\n                    name === 'phone' ? phone(value, { text: false })\n                        : name === 'email' ? email(value, { text: false })\n                            : required(value, { text: false })) === undefined;\n\n                if (name === 'date' && !this.state.date.value) {\n                    isValid = false;\n                }\n\n                if (name === 'password' && !!this.state[name].value.length && this.state[name].value.length < 8) {\n                    isValid = false;\n                }\n\n                if (\n                    name === 'dateInputMaskValue' && this.props.mediaWidth < MOBILE_VERRSION && this.state.dateInputMaskValue.value.includes('_') ||\n                    name === 'dateInputMaskValue' && !this.state.dateInputMaskValue.value\n                ) {\n                    isValid = false;\n                }\n\n                const newValue = { ...property, isValid };\n                thisState[name] = newValue;\n\n                this.setState({\n                    [name]: newValue\n                });\n            }\n        });\n\n        return thisState;\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n\n        const { name, surname, email, password, phone, date, confirm, activeCountry } = this.state;\n\n        const thisState = this.handleCheckErrors(Object.keys({\n            name,\n            surname,\n            email,\n            password,\n            phone,\n            date,\n            confirm\n        }));\n        let isValid = true;\n\n        for (let key in thisState) {\n            if (!pathOr(['isValid'], true, thisState[key])) {\n                isValid = false;\n            }\n        }\n\n        if (isValid) {\n            const user = {\n                name: name.value,\n                surname: surname.value,\n                email: email.value,\n                password: password.value,\n                phone: phone.value,\n                date: this.props.mediaWidth < MOBILE_VERRSION ? date.value : Date.parse(date.value),\n                country: activeCountry.name\n            };\n\n            const credentials = {\n                email: email.value.trim(),\n                password: password.value.trim()\n            };\n\n            this.props.saveUser(user)\n                .then(() => {\n                    this.setState({\n                        ...this.defaultState()\n                    }, () => this.props.logIn(credentials)\n                        .then(() => {\n                            this.props.checkAuthentication();\n                        }));\n                    this.closePopup();\n                })\n                .catch(e => this.setState({ error: e.message }));\n        }\n    };\n\n    closePopup = () => {\n        this.props.setAuthenticationPopup(false);\n    };\n\n    handlerCheckBoxClick = type => () => {\n        this.setState({\n            [type]: { ...this.state[type], value: !this.state[type].value }\n        });\n    }\n\n    handlerShowPassword = () => {\n        this.setState({ isPasswordShown: !this.state.isPasswordShown });\n    }\n\n    handleSetCountry = country => {\n        this.setState({ activeCountry: country, phone: { ...this.state.phone, value: this.state.phone.value } });\n    }\n\n    setInitialDate = () => {\n        const dataArr = this.state.date.value.split('.');\n        return this.state.date.value ? new Date(dataArr[2], dataArr[1], dataArr[0]) : new Date();\n    }\n\n    setStartDate = date => {\n        if (this.props.mediaWidth >= MOBILE_VERRSION) {\n            this.setState({\n                date: { ...this.state.date, value: date, isValid: !!date }\n            });\n            return;\n        }\n        this.setState({\n            date: { ...this.state.date, value: Date.parse(date) }\n        });\n    }\n\n    setMobileStartDate = e => {\n        const [day, month, year] = e.target.value.split('.').map(i => i.replace(/_/g, ''));\n        this.setState({\n            date: { ...this.state.date, value: new Date().setFullYear(year, month - 1, day) },\n            dateInputMaskValue: { ...this.state.dateInputMaskValue, value: e.target.value }\n        });\n    }\n\n    getDate = currentDate => {\n        if (!currentDate) {\n            return;\n        }\n\n        const date = new Date(currentDate);\n\n        return format(date, 'dd.MM.yyyy');\n    };\n\n    handleIsMobileVersion = () => {\n        const { dateInputMaskValue, date } = this.state;\n\n        if (this.props.mediaWidth >= MOBILE_VERRSION && dateInputMaskValue.value) {\n            this.setState({\n                date: { ...date, value: date.value },\n                dateInputMaskValue: { ...dateInputMaskValue, value: '' }\n            });\n        }\n\n        if (this.props.mediaWidth < MOBILE_VERRSION && !dateInputMaskValue.value) {\n            this.setState({\n                date: { ...date, value: date.value },\n                dateInputMaskValue: { ...dateInputMaskValue, value: this.getDate(date.value) || '__.__.____' }\n            });\n        }\n    }\n\n    render () {\n        const { langMap } = this.props;\n        const { confirm, isPasswordShown, error, activeCountry } = this.state;\n        const text = propOr('auth', {}, langMap);\n\n        return (\n            [\n                <form key={0} className={styles.form} onSubmit={this.handleSubmit}>\n                    <FormInput\n                        isError={!this.state['name'].isValid}\n                        texts={{ name: `${text.inputs.name.placeholder}`, nameValidator: `${text.inputs.name.validator}` }}\n                        name='name'\n                        onFocus={this.onFocus}\n                        onBlur={this.onBlur}\n                        handleChange={this.handleChange}\n                        value={this.state.name.value}\n                        focus={this.state.name.focus}\n                    />\n                    <FormInput\n                        isError={!this.state['surname'].isValid}\n                        texts={{ surname: `${text.inputs.surname.placeholder}`, surnameValidator: `${text.inputs.surname.validator}` }}\n                        name='surname'\n                        onFocus={this.onFocus}\n                        onBlur={this.onBlur}\n                        handleChange={this.handleChange}\n                        value={this.state.surname.value}\n                        focus={this.state.surname.focus}\n                    />\n                    <div className={styles.emailContainerField}>\n                        <FormInput\n                            isError={!this.state['email'].isValid}\n                            texts={{ email: `${text.inputs.email.placeholder}`, emailValidator: `${text.inputs.email.validator}` }}\n                            name='email'\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            handleChange={this.handleChange}\n                            value={this.state.email.value}\n                            focus={this.state.email.focus}\n                            activeStyle={true}\n                        />\n                        <div className={classNames(styles.bottomLabel, {\n                            [styles.bottomLabelActive]: this.state['email'].isValid\n                        })}>{text.isLogin}</div>\n                    </div>\n                    <div className={styles.passwordContainerField}>\n                        <FormInput\n                            isError={!this.state['password'].isValid}\n                            texts={{ password: `${text.inputs.password.placeholder}`, passwordValidator: `${text.inputs.password.validator}` }}\n                            name='password'\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            handleChange={this.handleChange}\n                            value={this.state.password.value}\n                            focus={this.state.password.focus}\n                            {...!isPasswordShown && { type: 'password' }}\n                        />\n                        <img\n                            onMouseDown={this.handlerShowPassword}\n                            src=\"/src/apps/client/ui/components/AuthFormPopup/images/password.svg\"\n                            alt=\"\"\n                        />\n                    </div>\n                    <div ref={this.phoneContainerRef} className={classNames(styles.phoneContainerField, {\n                        [styles.focusPhoneField]: this.state.phone.focus\n                    })}>\n                        <FormInput\n                            isError={!this.state['phone'].isValid}\n                            texts={{ phone: `${text.inputs.phone.placeholder}`, phoneValidator: `${text.inputs.phone.validator}` }}\n                            name='phone'\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            handleChange={this.handleChange}\n                            value={this.state.phone.value}\n                            focus={this.state.phone.focus}\n                        />\n                        <div className={styles.originBlock}>\n                            <CountrySelector\n                                activeCountry={activeCountry}\n                                setCountry={this.handleSetCountry}\n                                stateCountry={this.state.phone.value}\n                            />\n                            <div ref={this.callingCodeRef} className={styles.callingCode}>{activeCountry.callingCode}</div>\n                        </div>\n                    </div>\n                    <div className={styles.dateContainerField}>\n                        <div className={classNames(styles.dateTitle, {\n                            [styles.dateErrorTitle]: !this.state['date'].isValid || !this.state['dateInputMaskValue'].isValid,\n                            [styles.dateTitleActive]: this.state['date'].focus ||\n                                this.state['date'].value ||\n                                this.state['dateInputMaskValue'].focus ||\n                                this.state['dateInputMaskValue'].value\n                        })}>\n                            Дата рождения\n                        </div>\n                        {this.props.mediaWidth >= MOBILE_VERRSION && <div className={classNames(styles.datePickerContainer, {\n                            [styles.dateErrorField]: !this.state['date'].isValid\n                        })}>\n                            <DatePicker dateFormat=\"dd.MM.yyyy\"\n                                selected={this.state.date.value}\n                                onChange={date => this.setStartDate(date)}\n                                onFocus={this.onFocus('date')}\n                                onBlur={() => this.onBlur('date')}\n                                maxDate={new Date()}\n                                showMonthDropdown\n                                showYearDropdown\n                            />\n                        </div>}\n                        <InputMask\n                            mask=\"99.99.9999\"\n                            value={this.state.dateInputMaskValue.value}\n                            onFocus={this.onFocus('dateInputMaskValue')}\n                            onChange={this.setMobileStartDate}\n                            onBlur={() => this.onBlur('dateInputMaskValue')}\n                        >\n                            {inputProps => <input\n                                {...inputProps}\n                                className={classNames(styles.mobileMaskDate, {\n                                    [styles.mobileMaskDateActive]: this.state.dateInputMaskValue.focus,\n                                    [styles.dateTitleActive]: this.state['dateInputMaskValue'].focus || this.state['dateInputMaskValue'].value,\n                                    [styles.dateErrorField]: !this.state['dateInputMaskValue'].isValid\n                                })}\n                                type=\"text\"\n                                name='dateMask'\n                            />}\n                        </InputMask>\n                        <img src=\"/src/apps/client/ui/components/RegistrationFormPopup/images/date.svg\" alt=\"\" />\n                        <div className={classNames(styles.dateBottomLabel, {\n                            [styles.dateBottomLabelActive]: !this.state['date'].isValid || !this.state['dateInputMaskValue'].isValid\n                        })}>{text.inputs.date.validator}</div>\n                    </div>\n                    <div className={styles.checkboxesContainer}>\n                        <div onClick={this.handlerCheckBoxClick('confirm')}>\n                            <img className={styles.emptyCheck} src=\"/src/apps/client/ui/components/RegistrationFormPopup/images/empty.png\" alt=\"\" />\n                            <img className={classNames(styles.fillCheck, {\n                                [styles.activeCheckbox]: confirm.value\n                            })} src=\"/src/apps/client/ui/components/RegistrationFormPopup/images/checked.png\" alt=\"\" />\n                            {text.iAccept}\n                        </div>\n                        <div className={classNames(styles.checkboxError, {\n                            [styles.checkboxErrorActive]: !this.state['confirm'].isValid\n                        })}>{text.updates}</div>\n                    </div>\n                    <div className={styles.buttonContainer}>\n                        {error && <div className={styles.errorMessage}>{error}</div>}\n                        <button className={classNames(styles.button)} type='submit'>{text.signUp}</button>\n                    </div>\n                </form>\n            ]\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegistrationFormPopup);\n"]}]}