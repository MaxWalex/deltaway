{"remainingRequest":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js??ref--13-2!C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\admin\\ui\\components\\NewCredentialsForm\\NewCredentialsForm.jsx","dependencies":[{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\admin\\ui\\components\\NewCredentialsForm\\NewCredentialsForm.jsx","mtime":1671546440000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\.babelrc","mtime":1671546158000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1671546958000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js","mtime":1671546956000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class, _temp, _initialiseProps, _React$createElement8;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Button = require('@material-ui/core/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _TextField = require('@material-ui/core/TextField');\n\nvar _TextField2 = _interopRequireDefault(_TextField);\n\nvar _Typography = require('@material-ui/core/Typography');\n\nvar _Typography2 = _interopRequireDefault(_Typography);\n\nvar _noop = require('@tinkoff/utils/function/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _styles = require('@material-ui/core/styles');\n\nvar _reactRedux = require('react-redux');\n\nvar _changeCredentials2 = require('../../../services/changeCredentials');\n\nvar _changeCredentials3 = _interopRequireDefault(_changeCredentials2);\n\nvar _changeRecoveryCredentials2 = require('../../../services/changeRecoveryCredentials');\n\nvar _changeRecoveryCredentials3 = _interopRequireDefault(_changeRecoveryCredentials2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EMAIL_PATTERN = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i; // eslint-disable-line no-control-regex, no-useless-escape, max-len\n\nvar materialStyles = {\n    form: {\n        width: '400px'\n    },\n    errorPoint: {\n        marginTop: '10px',\n        fontSize: '14px'\n    }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n        changeCredentials: function changeCredentials() {\n            return dispatch(_changeCredentials3.default.apply(undefined, arguments));\n        },\n        changeRecoveryCredentials: function changeRecoveryCredentials() {\n            return dispatch(_changeRecoveryCredentials3.default.apply(undefined, arguments));\n        }\n    };\n};\n\nvar _ref2 = _react2.default.createElement(\n    _Button2.default,\n    (_React$createElement8 = { variant: 'contained', color: 'primary', type: 'submit', fullWidth: true, 'data-qa-file': 'NewCredentialsForm'\n    }, (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'NewCredentialsForm'), _React$createElement8),\n    '\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C'\n);\n\nvar NewCredentialsForm = (_temp = _class = function (_Component) {\n    (0, _inherits3.default)(NewCredentialsForm, _Component);\n\n    function NewCredentialsForm() {\n        var _ref;\n\n        (0, _classCallCheck3.default)(this, NewCredentialsForm);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = NewCredentialsForm.__proto__ || Object.getPrototypeOf(NewCredentialsForm)).call.apply(_ref, [this].concat(args)));\n\n        _initialiseProps.call(_this);\n\n        var _this$props$initial = _this.props.initial,\n            email = _this$props$initial.email,\n            login = _this$props$initial.login;\n\n\n        _this.state = {\n            email: email || '',\n            login: login || '',\n            password: '',\n            password2: '',\n            errors: []\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(NewCredentialsForm, [{\n        key: 'render',\n        value: function render() {\n            var _React$createElement, _React$createElement2, _React$createElement3, _React$createElement4, _React$createElement6, _React$createElement7;\n\n            var classes = this.props.classes;\n            var _state = this.state,\n                login = _state.login,\n                password = _state.password,\n                password2 = _state.password2,\n                email = _state.email,\n                errors = _state.errors;\n\n\n            return _react2.default.createElement(\n                'div',\n                (_React$createElement7 = {\n                    'data-qa-file': 'NewCredentialsForm'\n                }, (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'NewCredentialsForm'), _React$createElement7),\n                _react2.default.createElement(\n                    'form',\n                    (_React$createElement6 = { className: classes.form, onSubmit: this.handleSubmit, 'data-qa-file': 'NewCredentialsForm'\n                    }, (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'NewCredentialsForm'), _React$createElement6),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement = {\n                        label: 'Email',\n                        value: email,\n                        onChange: this.handleChange('email'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        required: true,\n                        InputLabelProps: {\n                            shrink: !!email\n                        },\n                        'data-qa-file': 'NewCredentialsForm'\n                    }, (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'NewCredentialsForm'), _React$createElement)),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement2 = {\n                        label: '\\u041B\\u043E\\u0433\\u0438\\u043D',\n                        value: login,\n                        onChange: this.handleChange('login'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        InputLabelProps: {\n                            shrink: !!login\n                        },\n                        required: true,\n                        'data-qa-file': 'NewCredentialsForm'\n                    }, (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'NewCredentialsForm'), _React$createElement2)),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement3 = {\n                        label: '\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C',\n                        value: password,\n                        onChange: this.handleChange('password'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        required: true,\n                        InputLabelProps: {\n                            shrink: !!password\n                        },\n                        type: 'password',\n                        'data-qa-file': 'NewCredentialsForm'\n                    }, (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'NewCredentialsForm'), _React$createElement3)),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement4 = {\n                        label: '\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C',\n                        value: password2,\n                        onChange: this.handleChange('password2'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        required: true,\n                        InputLabelProps: {\n                            shrink: !!password2\n                        },\n                        type: 'password',\n                        'data-qa-file': 'NewCredentialsForm'\n                    }, (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'NewCredentialsForm'), _React$createElement4)),\n                    _ref2,\n                    errors.map(function (error, i) {\n                        var _React$createElement5;\n\n                        return _react2.default.createElement(\n                            _Typography2.default,\n                            (_React$createElement5 = { className: classes.errorPoint, color: 'error', key: i, 'data-qa-file': 'NewCredentialsForm'\n                            }, (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'NewCredentialsForm'), _React$createElement5),\n                            '\\u2022 ',\n                            error\n                        );\n                    })\n                )\n            );\n        }\n    }]);\n    return NewCredentialsForm;\n}(_react.Component), _class.defaultProps = {\n    onDone: _noop2.default,\n    authentication: {},\n    recovery: {},\n    initial: {}\n}, _initialiseProps = function _initialiseProps() {\n    var _this2 = this;\n\n    this.changeCredentials = function (newCredentials) {\n        switch (_this2.props.type) {\n            case 'authentication':\n                return _this2.props.changeCredentials({\n                    oldCredentials: _this2.props.authentication,\n                    newCredentials: newCredentials\n                });\n            case 'recovery':\n                return _this2.props.changeRecoveryCredentials({\n                    recovery: _this2.props.recovery,\n                    newCredentials: newCredentials\n                });\n        }\n    };\n\n    this.newCredentialsValidators = [function (_ref3) {\n        var login = _ref3.login;\n        return (/[а-яА-Я]/g.test(login) ? 'Логин не должен содержать кириллицу' : null\n        );\n    }, function (_ref4) {\n        var login = _ref4.login;\n        return (/ /g.test(login) ? 'Логин не должен содержать пробелов' : null\n        );\n    }, function (_ref5) {\n        var password = _ref5.password;\n        return password.length >= 8 ? null : 'Длина пароля должна быть не меньше восьми';\n    }, function (_ref6) {\n        var password = _ref6.password;\n        return (/[а-яА-Я]/g.test(password) ? 'Пароль не должен содержать кириллицу' : null\n        );\n    }, function (_ref7) {\n        var password = _ref7.password;\n        return (/ /g.test(password) ? 'Пароль не должен содержать пробелов' : null\n        );\n    }, function (_ref8) {\n        var password = _ref8.password;\n        return (/[0-9]/g.test(password) ? null : 'В пароле должны использоваться цифры'\n        );\n    }, function (_ref9) {\n        var password = _ref9.password,\n            password2 = _ref9.password2;\n        return password === password2 ? null : 'Пароли должны совпадать';\n    }, function (_ref10) {\n        var email = _ref10.email;\n        return EMAIL_PATTERN.test(email) ? null : 'Введите валидный имейл';\n    }];\n\n    this.validateCredentials = function (credentials) {\n        var errors = [];\n\n        _this2.newCredentialsValidators.forEach(function (validator) {\n            var error = validator(credentials);\n\n            error && errors.push(error);\n        });\n\n        return errors;\n    };\n\n    this.handleSubmit = function (event) {\n        event.preventDefault();\n\n        var _state2 = _this2.state,\n            login = _state2.login,\n            password = _state2.password,\n            password2 = _state2.password2,\n            email = _state2.email;\n\n        var newCredentials = {\n            login: login.trim(),\n            password: password.trim(),\n            email: email.trim()\n        };\n        var errors = _this2.validateCredentials((0, _extends3.default)({}, newCredentials, {\n            password2: password2.trim()\n        }));\n\n        _this2.setState({\n            errors: errors\n        });\n\n        if (errors.length) {\n            return;\n        }\n\n        _this2.changeCredentials(newCredentials).then(function () {\n            _this2.props.onDone();\n        }).catch(function () {\n            _this2.setState({\n                authentication: {\n                    login: login,\n                    password: '',\n                    password2: ''\n                }\n            });\n        });\n    };\n\n    this.handleChange = function (credential) {\n        return function (event) {\n            _this2.setState((0, _defineProperty3.default)({}, credential, event.target.value));\n        };\n    };\n}, _temp);\nexports.default = (0, _reactRedux.connect)(null, mapDispatchToProps)((0, _styles.withStyles)(materialStyles)(NewCredentialsForm));",null]}