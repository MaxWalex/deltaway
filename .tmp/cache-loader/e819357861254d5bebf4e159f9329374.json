{"remainingRequest":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js??ref--13-2!C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\admin\\ui\\components\\NewCredentialsForm\\NewCredentialsForm.jsx","dependencies":[{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\src\\apps\\admin\\ui\\components\\NewCredentialsForm\\NewCredentialsForm.jsx","mtime":1671546440000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\.babelrc","mtime":1671546158000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1671546958000},{"path":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20\\node_modules\\babel-loader\\lib\\index.js","mtime":1671546956000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class,\n    _temp,\n    _initialiseProps,\n    _jsxFileName = 'C:\\\\Users\\\\cherv\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\deltaway.20\\\\src\\\\apps\\\\admin\\\\ui\\\\components\\\\NewCredentialsForm\\\\NewCredentialsForm.jsx';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Button = require('@material-ui/core/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _TextField = require('@material-ui/core/TextField');\n\nvar _TextField2 = _interopRequireDefault(_TextField);\n\nvar _Typography = require('@material-ui/core/Typography');\n\nvar _Typography2 = _interopRequireDefault(_Typography);\n\nvar _noop = require('@tinkoff/utils/function/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _styles = require('@material-ui/core/styles');\n\nvar _reactRedux = require('react-redux');\n\nvar _changeCredentials2 = require('../../../services/changeCredentials');\n\nvar _changeCredentials3 = _interopRequireDefault(_changeCredentials2);\n\nvar _changeRecoveryCredentials2 = require('../../../services/changeRecoveryCredentials');\n\nvar _changeRecoveryCredentials3 = _interopRequireDefault(_changeRecoveryCredentials2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EMAIL_PATTERN = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i; // eslint-disable-line no-control-regex, no-useless-escape, max-len\n\nvar materialStyles = {\n    form: {\n        width: '400px'\n    },\n    errorPoint: {\n        marginTop: '10px',\n        fontSize: '14px'\n    }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n        changeCredentials: function changeCredentials() {\n            return dispatch(_changeCredentials3.default.apply(undefined, arguments));\n        },\n        changeRecoveryCredentials: function changeRecoveryCredentials() {\n            return dispatch(_changeRecoveryCredentials3.default.apply(undefined, arguments));\n        }\n    };\n};\n\nvar NewCredentialsForm = (_temp = _class = function (_Component) {\n    (0, _inherits3.default)(NewCredentialsForm, _Component);\n\n    function NewCredentialsForm() {\n        var _ref;\n\n        (0, _classCallCheck3.default)(this, NewCredentialsForm);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = NewCredentialsForm.__proto__ || Object.getPrototypeOf(NewCredentialsForm)).call.apply(_ref, [this].concat(args)));\n\n        _initialiseProps.call(_this);\n\n        var _this$props$initial = _this.props.initial,\n            email = _this$props$initial.email,\n            login = _this$props$initial.login;\n\n\n        _this.state = {\n            email: email || '',\n            login: login || '',\n            password: '',\n            password2: '',\n            errors: []\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(NewCredentialsForm, [{\n        key: 'render',\n        value: function render() {\n            var _React$createElement,\n                _React$createElement2,\n                _React$createElement3,\n                _React$createElement4,\n                _React$createElement5,\n                _this2 = this,\n                _React$createElement7,\n                _React$createElement8;\n\n            var classes = this.props.classes;\n            var _state = this.state,\n                login = _state.login,\n                password = _state.password,\n                password2 = _state.password2,\n                email = _state.email,\n                errors = _state.errors;\n\n\n            return _react2.default.createElement(\n                'div',\n                (_React$createElement8 = {\n                    'data-qa-file': 'NewCredentialsForm',\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 151\n                    },\n                    __self: this\n                }, (0, _defineProperty3.default)(_React$createElement8, '__self', this), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement8, 'data-qa-file', 'NewCredentialsForm'), _React$createElement8),\n                _react2.default.createElement(\n                    'form',\n                    (_React$createElement7 = { className: classes.form, onSubmit: this.handleSubmit, 'data-qa-file': 'NewCredentialsForm',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 152\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement7, '__self', this), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement7, 'data-qa-file', 'NewCredentialsForm'), _React$createElement7),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement = {\n                        label: 'Email',\n                        value: email,\n                        onChange: this.handleChange('email'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        required: true,\n                        InputLabelProps: {\n                            shrink: !!email\n                        },\n                        'data-qa-file': 'NewCredentialsForm',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 153\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement, '__self', this), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement, 'data-qa-file', 'NewCredentialsForm'), _React$createElement)),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement2 = {\n                        label: '\\u041B\\u043E\\u0433\\u0438\\u043D',\n                        value: login,\n                        onChange: this.handleChange('login'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        InputLabelProps: {\n                            shrink: !!login\n                        },\n                        required: true,\n                        'data-qa-file': 'NewCredentialsForm',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 165\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement2, '__self', this), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement2, 'data-qa-file', 'NewCredentialsForm'), _React$createElement2)),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement3 = {\n                        label: '\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C',\n                        value: password,\n                        onChange: this.handleChange('password'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        required: true,\n                        InputLabelProps: {\n                            shrink: !!password\n                        },\n                        type: 'password',\n                        'data-qa-file': 'NewCredentialsForm',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 177\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement3, '__self', this), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement3, 'data-qa-file', 'NewCredentialsForm'), _React$createElement3)),\n                    _react2.default.createElement(_TextField2.default, (_React$createElement4 = {\n                        label: '\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C',\n                        value: password2,\n                        onChange: this.handleChange('password2'),\n                        margin: 'normal',\n                        variant: 'outlined',\n                        fullWidth: true,\n                        required: true,\n                        InputLabelProps: {\n                            shrink: !!password2\n                        },\n                        type: 'password',\n                        'data-qa-file': 'NewCredentialsForm',\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 190\n                        },\n                        __self: this\n                    }, (0, _defineProperty3.default)(_React$createElement4, '__self', this), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement4, 'data-qa-file', 'NewCredentialsForm'), _React$createElement4)),\n                    _react2.default.createElement(\n                        _Button2.default,\n                        (_React$createElement5 = { variant: 'contained', color: 'primary', type: 'submit', fullWidth: true, 'data-qa-file': 'NewCredentialsForm',\n                            __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 203\n                            },\n                            __self: this\n                        }, (0, _defineProperty3.default)(_React$createElement5, '__self', this), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement5, 'data-qa-file', 'NewCredentialsForm'), _React$createElement5),\n                        '\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C'\n                    ),\n                    errors.map(function (error, i) {\n                        var _React$createElement6;\n\n                        return _react2.default.createElement(\n                            _Typography2.default,\n                            (_React$createElement6 = { className: classes.errorPoint, color: 'error', key: i, 'data-qa-file': 'NewCredentialsForm',\n                                __source: {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 206\n                                },\n                                __self: _this2\n                            }, (0, _defineProperty3.default)(_React$createElement6, '__self', _this2), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'NewCredentialsForm'), (0, _defineProperty3.default)(_React$createElement6, 'data-qa-file', 'NewCredentialsForm'), _React$createElement6),\n                            '\\u2022 ',\n                            error\n                        );\n                    })\n                )\n            );\n        }\n    }]);\n    return NewCredentialsForm;\n}(_react.Component), _class.propTypes = {\n    classes: _propTypes2.default.object.isRequired,\n    type: _propTypes2.default.oneOf(['authentication', 'recovery']).isRequired,\n    changeCredentials: _propTypes2.default.func.isRequired,\n    changeRecoveryCredentials: _propTypes2.default.func.isRequired,\n    authentication: _propTypes2.default.object,\n    recovery: _propTypes2.default.object,\n    initial: _propTypes2.default.object,\n    onDone: _propTypes2.default.func\n}, _class.defaultProps = {\n    onDone: _noop2.default,\n    authentication: {},\n    recovery: {},\n    initial: {}\n}, _initialiseProps = function _initialiseProps() {\n    var _this3 = this;\n\n    this.changeCredentials = function (newCredentials) {\n        switch (_this3.props.type) {\n            case 'authentication':\n                return _this3.props.changeCredentials({\n                    oldCredentials: _this3.props.authentication,\n                    newCredentials: newCredentials\n                });\n            case 'recovery':\n                return _this3.props.changeRecoveryCredentials({\n                    recovery: _this3.props.recovery,\n                    newCredentials: newCredentials\n                });\n        }\n    };\n\n    this.newCredentialsValidators = [function (_ref2) {\n        var login = _ref2.login;\n        return (/[а-яА-Я]/g.test(login) ? 'Логин не должен содержать кириллицу' : null\n        );\n    }, function (_ref3) {\n        var login = _ref3.login;\n        return (/ /g.test(login) ? 'Логин не должен содержать пробелов' : null\n        );\n    }, function (_ref4) {\n        var password = _ref4.password;\n        return password.length >= 8 ? null : 'Длина пароля должна быть не меньше восьми';\n    }, function (_ref5) {\n        var password = _ref5.password;\n        return (/[а-яА-Я]/g.test(password) ? 'Пароль не должен содержать кириллицу' : null\n        );\n    }, function (_ref6) {\n        var password = _ref6.password;\n        return (/ /g.test(password) ? 'Пароль не должен содержать пробелов' : null\n        );\n    }, function (_ref7) {\n        var password = _ref7.password;\n        return (/[0-9]/g.test(password) ? null : 'В пароле должны использоваться цифры'\n        );\n    }, function (_ref8) {\n        var password = _ref8.password,\n            password2 = _ref8.password2;\n        return password === password2 ? null : 'Пароли должны совпадать';\n    }, function (_ref9) {\n        var email = _ref9.email;\n        return EMAIL_PATTERN.test(email) ? null : 'Введите валидный имейл';\n    }];\n\n    this.validateCredentials = function (credentials) {\n        var errors = [];\n\n        _this3.newCredentialsValidators.forEach(function (validator) {\n            var error = validator(credentials);\n\n            error && errors.push(error);\n        });\n\n        return errors;\n    };\n\n    this.handleSubmit = function (event) {\n        event.preventDefault();\n\n        var _state2 = _this3.state,\n            login = _state2.login,\n            password = _state2.password,\n            password2 = _state2.password2,\n            email = _state2.email;\n\n        var newCredentials = {\n            login: login.trim(),\n            password: password.trim(),\n            email: email.trim()\n        };\n        var errors = _this3.validateCredentials((0, _extends3.default)({}, newCredentials, {\n            password2: password2.trim()\n        }));\n\n        _this3.setState({\n            errors: errors\n        });\n\n        if (errors.length) {\n            return;\n        }\n\n        _this3.changeCredentials(newCredentials).then(function () {\n            _this3.props.onDone();\n        }).catch(function () {\n            _this3.setState({\n                authentication: {\n                    login: login,\n                    password: '',\n                    password2: ''\n                }\n            });\n        });\n    };\n\n    this.handleChange = function (credential) {\n        return function (event) {\n            _this3.setState((0, _defineProperty3.default)({}, credential, event.target.value));\n        };\n    };\n}, _temp);\nexports.default = (0, _reactRedux.connect)(null, mapDispatchToProps)((0, _styles.withStyles)(materialStyles)(NewCredentialsForm));",{"version":3,"sources":["src\\apps\\admin\\ui\\components\\NewCredentialsForm\\NewCredentialsForm.jsx"],"names":["EMAIL_PATTERN","materialStyles","form","width","errorPoint","marginTop","fontSize","mapDispatchToProps","dispatch","changeCredentials","changeRecoveryCredentials","NewCredentialsForm","args","props","initial","email","login","state","password","password2","errors","classes","handleSubmit","handleChange","shrink","map","error","i","Component","propTypes","PropTypes","object","isRequired","type","oneOf","func","authentication","recovery","onDone","defaultProps","noop","oldCredentials","newCredentials","newCredentialsValidators","test","length","validateCredentials","forEach","validator","credentials","push","event","preventDefault","trim","setState","then","catch","credential","target","value"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;AAEA;;AACA;;;;AACA;;;;;;AAEA,IAAMA,gBAAgB,y4BAAtB,C,CAAi6B;;AAEj6B,IAAMC,iBAAiB;AACnBC,UAAM;AACFC,eAAO;AADL,KADa;AAInBC,gBAAY;AACRC,mBAAW,MADH;AAERC,kBAAU;AAFF;AAJO,CAAvB;;AAUA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAACC,QAAD;AAAA,WAAe;AACtCC,2BAAmB;AAAA,mBAAgBD,SAASC,uDAAT,CAAhB;AAAA,SADmB;AAEtCC,mCAA2B;AAAA,mBAAgBF,SAASE,+DAAT,CAAhB;AAAA;AAFW,KAAf;AAAA,CAA3B;;IAKMC,kB;;;AAmBF,kCAAsB;AAAA;;AAAA;;AAAA,0CAANC,IAAM;AAANA,gBAAM;AAAA;;AAAA,qLACTA,IADS;;AAAA;;AAAA,kCAGoB,MAAKC,KAHzB,CAGVC,OAHU;AAAA,YAGCC,KAHD,uBAGCA,KAHD;AAAA,YAGQC,KAHR,uBAGQA,KAHR;;;AAKlB,cAAKC,KAAL,GAAa;AACTF,mBAAOA,SAAS,EADP;AAETC,mBAAOA,SAAS,EAFP;AAGTE,sBAAU,EAHD;AAITC,uBAAW,EAJF;AAKTC,oBAAQ;AALC,SAAb;AALkB;AAYrB;;;;iCAmFS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,gBACEC,OADF,GACc,KAAKR,KADnB,CACEQ,OADF;AAAA,yBAEgD,KAAKJ,KAFrD;AAAA,gBAEED,KAFF,UAEEA,KAFF;AAAA,gBAESE,QAFT,UAESA,QAFT;AAAA,gBAEmBC,SAFnB,UAEmBA,SAFnB;AAAA,gBAE8BJ,KAF9B,UAE8BA,KAF9B;AAAA,gBAEqCK,MAFrC,UAEqCA,MAFrC;;;AAIN,mBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACH;AAAA;AAAA,+CAAM,WAAWC,QAAQnB,IAAzB,EAA+B,UAAU,KAAKoB,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,kDAAC,mBAAD;AACI,+BAAM,OADV;AAEI,+BAAOP,KAFX;AAGI,kCAAU,KAAKQ,YAAL,CAAkB,OAAlB,CAHd;AAII,gCAAO,QAJX;AAKI,iCAAQ,UALZ;AAMI,uCANJ;AAOI,sCAPJ;AAQI,yCAAiB;AACbC,oCAAQ,CAAC,CAACT;AADG,yBARrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wSADJ;AAaI,kDAAC,mBAAD;AACI,+BAAM,gCADV;AAEI,+BAAOC,KAFX;AAGI,kCAAU,KAAKO,YAAL,CAAkB,OAAlB,CAHd;AAII,gCAAO,QAJX;AAKI,iCAAQ,UALZ;AAMI,uCANJ;AAOI,yCAAiB;AACbC,oCAAQ,CAAC,CAACR;AADG,yBAPrB;AAUI,sCAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4SAbJ;AAyBI,kDAAC,mBAAD;AACI,+BAAM,sCADV;AAEI,+BAAOE,QAFX;AAGI,kCAAU,KAAKK,YAAL,CAAkB,UAAlB,CAHd;AAII,gCAAO,QAJX;AAKI,iCAAQ,UALZ;AAMI,uCANJ;AAOI,sCAPJ;AAQI,yCAAiB;AACbC,oCAAQ,CAAC,CAACN;AADG,yBARrB;AAWI,8BAAK,UAXT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4SAzBJ;AAsCI,kDAAC,mBAAD;AACI,+BAAM,6FADV;AAEI,+BAAOC,SAFX;AAGI,kCAAU,KAAKI,YAAL,CAAkB,WAAlB,CAHd;AAII,gCAAO,QAJX;AAKI,iCAAQ,UALZ;AAMI,uCANJ;AAOI,sCAPJ;AAQI,yCAAiB;AACbC,oCAAQ,CAAC,CAACL;AADG,yBARrB;AAWI,8BAAK,UAXT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4SAtCJ;AAmDI;AAAC,wCAAD;AAAA,mDAAQ,SAAQ,WAAhB,EAA4B,OAAM,SAAlC,EAA4C,MAAK,QAAjD,EAA0D,eAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAnDJ;AAsDMC,2BAAOK,GAAP,CAAW,UAACC,KAAD,EAAQC,CAAR;AAAA;;AAAA,+BAAc;AAAC,gDAAD;AAAA,uDAAY,WAAWN,QAAQjB,UAA/B,EAA2C,OAAM,OAAjD,EAAyD,KAAKuB,CAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyED;AAAzE,yBAAd;AAAA,qBAAX;AAtDN;AADG,aAAP;AA0DH;;;EAhL4BE,gB,UACtBC,S,GAAY;AACfR,aAASS,oBAAUC,MAAV,CAAiBC,UADX;AAEfC,UAAMH,oBAAUI,KAAV,CAAgB,CAAC,gBAAD,EAAmB,UAAnB,CAAhB,EAAgDF,UAFvC;AAGfvB,uBAAmBqB,oBAAUK,IAAV,CAAeH,UAHnB;AAIftB,+BAA2BoB,oBAAUK,IAAV,CAAeH,UAJ3B;AAKfI,oBAAgBN,oBAAUC,MALX;AAMfM,cAAUP,oBAAUC,MANL;AAOfjB,aAASgB,oBAAUC,MAPJ;AAQfO,YAAQR,oBAAUK;AARH,C,SAWZI,Y,GAAe;AAClBD,YAAQE,cADU;AAElBJ,oBAAgB,EAFE;AAGlBC,cAAU,EAHQ;AAIlBvB,aAAS;AAJS,C;;;SAqBtBL,iB,GAAoB,0BAAkB;AAClC,gBAAQ,OAAKI,KAAL,CAAWoB,IAAnB;AACA,iBAAK,gBAAL;AACI,uBAAO,OAAKpB,KAAL,CAAWJ,iBAAX,CAA6B;AAChCgC,oCAAgB,OAAK5B,KAAL,CAAWuB,cADK;AAEhCM;AAFgC,iBAA7B,CAAP;AAIJ,iBAAK,UAAL;AACI,uBAAO,OAAK7B,KAAL,CAAWH,yBAAX,CAAqC;AACxC2B,8BAAU,OAAKxB,KAAL,CAAWwB,QADmB;AAExCK;AAFwC,iBAArC,CAAP;AAPJ;AAYH,K;;SAEDC,wB,GAA2B,CACvB;AAAA,YAAG3B,KAAH,SAAGA,KAAH;AAAA,eAAe,aAAY4B,IAAZ,CAAiB5B,KAAjB,IAA0B,qCAA1B,GAAkE;AAAjF;AAAA,KADuB,EAEvB;AAAA,YAAGA,KAAH,SAAGA,KAAH;AAAA,eAAe,MAAK4B,IAAL,CAAU5B,KAAV,IAAmB,oCAAnB,GAA0D;AAAzE;AAAA,KAFuB,EAGvB;AAAA,YAAGE,QAAH,SAAGA,QAAH;AAAA,eAAkBA,SAAS2B,MAAT,IAAmB,CAAnB,GAAuB,IAAvB,GAA8B,2CAAhD;AAAA,KAHuB,EAIvB;AAAA,YAAG3B,QAAH,SAAGA,QAAH;AAAA,eAAkB,aAAY0B,IAAZ,CAAiB1B,QAAjB,IAA6B,sCAA7B,GAAsE;AAAxF;AAAA,KAJuB,EAKvB;AAAA,YAAGA,QAAH,SAAGA,QAAH;AAAA,eAAkB,MAAK0B,IAAL,CAAU1B,QAAV,IAAsB,qCAAtB,GAA8D;AAAhF;AAAA,KALuB,EAMvB;AAAA,YAAGA,QAAH,SAAGA,QAAH;AAAA,eAAkB,UAAS0B,IAAT,CAAc1B,QAAd,IAA0B,IAA1B,GAAiC;AAAnD;AAAA,KANuB,EAOvB;AAAA,YAAGA,QAAH,SAAGA,QAAH;AAAA,YAAaC,SAAb,SAAaA,SAAb;AAAA,eAA6BD,aAAaC,SAAb,GAAyB,IAAzB,GAAgC,yBAA7D;AAAA,KAPuB,EAQvB;AAAA,YAAGJ,KAAH,SAAGA,KAAH;AAAA,eAAef,cAAc4C,IAAd,CAAmB7B,KAAnB,IAA4B,IAA5B,GAAmC,wBAAlD;AAAA,KARuB,C;;SAW3B+B,mB,GAAsB,uBAAe;AACjC,YAAM1B,SAAS,EAAf;;AAEA,eAAKuB,wBAAL,CAA8BI,OAA9B,CAAsC,qBAAa;AAC/C,gBAAMrB,QAAQsB,UAAUC,WAAV,CAAd;;AAEAvB,qBAASN,OAAO8B,IAAP,CAAYxB,KAAZ,CAAT;AACH,SAJD;;AAMA,eAAON,MAAP;AACH,K;;SAEDE,Y,GAAe,iBAAS;AACpB6B,cAAMC,cAAN;;AADoB,sBAG0B,OAAKnC,KAH/B;AAAA,YAGZD,KAHY,WAGZA,KAHY;AAAA,YAGLE,QAHK,WAGLA,QAHK;AAAA,YAGKC,SAHL,WAGKA,SAHL;AAAA,YAGgBJ,KAHhB,WAGgBA,KAHhB;;AAIpB,YAAM2B,iBAAiB;AACnB1B,mBAAOA,MAAMqC,IAAN,EADY;AAEnBnC,sBAAUA,SAASmC,IAAT,EAFS;AAGnBtC,mBAAOA,MAAMsC,IAAN;AAHY,SAAvB;AAKA,YAAMjC,SAAS,OAAK0B,mBAAL,4BACRJ,cADQ;AAEXvB,uBAAWA,UAAUkC,IAAV;AAFA,WAAf;;AAKA,eAAKC,QAAL,CAAc;AACVlC,oBAAQA;AADE,SAAd;;AAIA,YAAIA,OAAOyB,MAAX,EAAmB;AACf;AACH;;AAED,eAAKpC,iBAAL,CAAuBiC,cAAvB,EACKa,IADL,CACU,YAAM;AACR,mBAAK1C,KAAL,CAAWyB,MAAX;AACH,SAHL,EAIKkB,KAJL,CAIW,YAAM;AACT,mBAAKF,QAAL,CAAc;AACVlB,gCAAgB;AACZpB,gCADY;AAEZE,8BAAU,EAFE;AAGZC,+BAAW;AAHC;AADN,aAAd;AAOH,SAZL;AAaH,K;;SAEDI,Y,GAAe;AAAA,eAAc,iBAAS;AAClC,mBAAK+B,QAAL,mCACKG,UADL,EACkBN,MAAMO,MAAN,CAAaC,KAD/B;AAGH,SAJc;AAAA,K;;kBAuEJ,yBAAQ,IAAR,EAAcpD,kBAAd,EAAkC,wBAAWN,cAAX,EAA2BU,kBAA3B,CAAlC,C","file":"NewCredentialsForm.jsx","sourceRoot":"C:\\Users\\cherv\\OneDrive\\Рабочий стол\\deltaway.20","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport noop from '@tinkoff/utils/function/noop';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { connect } from 'react-redux';\nimport changeCredentials from '../../../services/changeCredentials';\nimport changeRecoveryCredentials from '../../../services/changeRecoveryCredentials';\n\nconst EMAIL_PATTERN = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i; // eslint-disable-line no-control-regex, no-useless-escape, max-len\n\nconst materialStyles = {\n    form: {\n        width: '400px'\n    },\n    errorPoint: {\n        marginTop: '10px',\n        fontSize: '14px'\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    changeCredentials: (...payload) => dispatch(changeCredentials(...payload)),\n    changeRecoveryCredentials: (...payload) => dispatch(changeRecoveryCredentials(...payload))\n});\n\nclass NewCredentialsForm extends Component {\n    static propTypes = {\n        classes: PropTypes.object.isRequired,\n        type: PropTypes.oneOf(['authentication', 'recovery']).isRequired,\n        changeCredentials: PropTypes.func.isRequired,\n        changeRecoveryCredentials: PropTypes.func.isRequired,\n        authentication: PropTypes.object,\n        recovery: PropTypes.object,\n        initial: PropTypes.object,\n        onDone: PropTypes.func\n    };\n\n    static defaultProps = {\n        onDone: noop,\n        authentication: {},\n        recovery: {},\n        initial: {}\n    };\n\n    constructor (...args) {\n        super(...args);\n\n        const { initial: { email, login } } = this.props;\n\n        this.state = {\n            email: email || '',\n            login: login || '',\n            password: '',\n            password2: '',\n            errors: []\n        };\n    }\n\n    changeCredentials = newCredentials => {\n        switch (this.props.type) {\n        case 'authentication':\n            return this.props.changeCredentials({\n                oldCredentials: this.props.authentication,\n                newCredentials\n            });\n        case 'recovery':\n            return this.props.changeRecoveryCredentials({\n                recovery: this.props.recovery,\n                newCredentials\n            });\n        }\n    };\n\n    newCredentialsValidators = [\n        ({ login }) => /[а-яА-Я]/g.test(login) ? 'Логин не должен содержать кириллицу' : null,\n        ({ login }) => / /g.test(login) ? 'Логин не должен содержать пробелов' : null,\n        ({ password }) => password.length >= 8 ? null : 'Длина пароля должна быть не меньше восьми',\n        ({ password }) => /[а-яА-Я]/g.test(password) ? 'Пароль не должен содержать кириллицу' : null,\n        ({ password }) => / /g.test(password) ? 'Пароль не должен содержать пробелов' : null,\n        ({ password }) => /[0-9]/g.test(password) ? null : 'В пароле должны использоваться цифры',\n        ({ password, password2 }) => password === password2 ? null : 'Пароли должны совпадать',\n        ({ email }) => EMAIL_PATTERN.test(email) ? null : 'Введите валидный имейл'\n    ];\n\n    validateCredentials = credentials => {\n        const errors = [];\n\n        this.newCredentialsValidators.forEach(validator => {\n            const error = validator(credentials);\n\n            error && errors.push(error);\n        });\n\n        return errors;\n    };\n\n    handleSubmit = event => {\n        event.preventDefault();\n\n        const { login, password, password2, email } = this.state;\n        const newCredentials = {\n            login: login.trim(),\n            password: password.trim(),\n            email: email.trim()\n        };\n        const errors = this.validateCredentials({\n            ...newCredentials,\n            password2: password2.trim()\n        });\n\n        this.setState({\n            errors: errors\n        });\n\n        if (errors.length) {\n            return;\n        }\n\n        this.changeCredentials(newCredentials)\n            .then(() => {\n                this.props.onDone();\n            })\n            .catch(() => {\n                this.setState({\n                    authentication: {\n                        login,\n                        password: '',\n                        password2: ''\n                    }\n                });\n            });\n    };\n\n    handleChange = credential => event => {\n        this.setState({\n            [credential]: event.target.value\n        });\n    };\n\n    render () {\n        const { classes } = this.props;\n        const { login, password, password2, email, errors } = this.state;\n\n        return <div>\n            <form className={classes.form} onSubmit={this.handleSubmit}>\n                <TextField\n                    label='Email'\n                    value={email}\n                    onChange={this.handleChange('email')}\n                    margin='normal'\n                    variant='outlined'\n                    fullWidth\n                    required\n                    InputLabelProps={{\n                        shrink: !!email\n                    }}\n                />\n                <TextField\n                    label='Логин'\n                    value={login}\n                    onChange={this.handleChange('login')}\n                    margin='normal'\n                    variant='outlined'\n                    fullWidth\n                    InputLabelProps={{\n                        shrink: !!login\n                    }}\n                    required\n                />\n                <TextField\n                    label='Пароль'\n                    value={password}\n                    onChange={this.handleChange('password')}\n                    margin='normal'\n                    variant='outlined'\n                    fullWidth\n                    required\n                    InputLabelProps={{\n                        shrink: !!password\n                    }}\n                    type='password'\n                />\n                <TextField\n                    label='Повторите пароль'\n                    value={password2}\n                    onChange={this.handleChange('password2')}\n                    margin='normal'\n                    variant='outlined'\n                    fullWidth\n                    required\n                    InputLabelProps={{\n                        shrink: !!password2\n                    }}\n                    type='password'\n                />\n                <Button variant='contained' color='primary' type='submit' fullWidth>\n                    Сменить\n                </Button>\n                { errors.map((error, i) => <Typography className={classes.errorPoint} color='error' key={i}>&bull; {error}</Typography>) }\n            </form>\n        </div>;\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(withStyles(materialStyles)(NewCredentialsForm));\n"]}]}